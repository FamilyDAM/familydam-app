(this.webpackJsonpfiles=this.webpackJsonpfiles||[]).push([[0],{365:function(e,t,a){},367:function(e){e.exports=JSON.parse('{"date":"{{date, yyyy-MM-dd hh:mm:ss a}}","instr":{"areYouSure":"Are you sure?","clickOrDrag":"Click or drag file to this area to upload","clickOrDragDesc":"Support for a single or bulk upload.","deleteFolderConfirmation":"Do you want to delete this folder and all files in it?","deleteFolderTitle":"Do you want to delete this file?"},"label":{"action":"Action","cancel":"Cancel","create":"Create","createNewFolder":"Create New Folder","dateCreated":"Date Created","delete":"Delete","download":"Download","fileInfo":"File Info","files":"Files","folderName":"Folder Name","name":"Name","newFolder":"New Folder","no":"No","yes":"Yes"}}')},368:function(e){e.exports=JSON.parse('{"date":"","instr":{"areYouSure":"Are you sure?","clickOrDrag":"","clickOrDragDesc":"","deleteFolderConfirmation":"Do you want to delete this folder and all files in it?","deleteFolderTitle":"Do you want to delete this file?"},"label":{"action":"Action","cancel":"","create":"","createNewFolder":"","dateCreated":"Date Created","delete":"Delete","download":"Download","fileInfo":"File Info","files":"Files","folderName":"","name":"Name","newFolder":"","no":"No","yes":"Yes"}}')},369:function(e){e.exports=JSON.parse('{"date":"{{date, yyyy-MM-dd hh:mm:ss a}}","instr":{"areYouSure":"\u4f60\u786e\u5b9a\u5417\uff1f","clickOrDrag":"\u5355\u51fb\u6216\u62d6\u52a8\u6587\u4ef6\u5230\u8be5\u533a\u57df\u4ee5\u4e0a\u4f20","clickOrDragDesc":"\u652f\u6301\u5355\u6b21\u6216\u6279\u91cf\u4e0a\u4f20\u3002","deleteFolderConfirmation":"\u662f\u5426\u8981\u5220\u9664\u6b64\u6587\u4ef6\u5939\u53ca\u5176\u4e2d\u7684\u6240\u6709\u6587\u4ef6\uff1f","deleteFolderTitle":"\u60a8\u8981\u5220\u9664\u6b64\u6587\u4ef6\u5417\uff1f"},"label":{"action":"\u884c\u52a8","cancel":"\u53d6\u6d88","create":"\u521b\u9020","createNewFolder":"\u5efa\u7acb\u65b0\u8d44\u6599\u5939","dateCreated":"\u521b\u5efa\u65e5\u671f","delete":"\u5220\u9664","download":"\u4e0b\u8f7d","fileInfo":"\u6587\u4ef6\u4fe1\u606f","files":"\u6863\u6848","folderName":"\u6587\u4ef6\u5939\u540d\u79f0","name":"\u540d\u79f0","newFolder":"\u65b0\u5efa\u6587\u4ef6\u5939","no":"\u6ca1\u6709","yes":"\u662f"}}')},762:function(e,t,a){"use strict";a.r(t);var n=a(258),i=a(0),o=a.n(i),r=a(27),l=a.n(r),s=(a(364),a(336)),c=a(817),d=a(333),p=a.n(d),u=a(334),h=a.n(u),m=a(335),f=a.n(m),g=(a(365),a(52)),b=a.n(g),v=a(74),w=a(38),y=a(45),C=a(79),k=a(78),x=a(148),S=a(61),F=a(280),O=a(200),E=a(819),D=a(802);F.a.use(O.e).init({resources:{"en-US":{translation:a(367)},"en-GB":{translation:a(368)},"zh-CN":{translation:a(369)}},fallbackLng:"en-US",ns:["translation"],interpolation:{escapeValue:!1,format:function format(e,t,a){return e.length>0&&t?Object(E.a)(Object(D.a)(e||""),t):e}}});var j=F.a,T=a(18),N=a(816),M=(a(370),a(50)),A=a(828),R=a(807),L=a(808),U=a(344),P=a(820),I=a(827),H=a(829),_=a(75),G=a(830),W=a(834),B=a(835),V=a(831),z=a(288),Y=a(341),$=a(120),q=a(832),J=a(833),K=a(765),Q=a(806),X=a(306),Z=a.n(X),ee=a(39),te=new function AppActions(){Object(w.a)(this,AppActions),this.navigateTo=new ee.Subject,this.logout={source:new ee.Subject,sink:new ee.Subject}},ae=function(e){Object(C.a)(Sidebar,e);var t=Object(k.a)(Sidebar);function Sidebar(){return Object(w.a)(this,Sidebar),t.apply(this,arguments)}return Object(y.a)(Sidebar,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return e.open!==this.props.open||e.user!==this.props.user||e.apps!==this.props.apps||e.secondaryApps!==this.props.secondaryApps}},{key:"handleLogout",value:function handleLogout(){window.localStorage.clear(),te.logout.source.next(!0),window.location="/index.html"}},{key:"findApp",value:function findApp(e,t){if(t){var a,n=Object(Y.a)(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.slug===e)return i}}catch(o){n.e(o)}finally{n.f()}}return null}},{key:"render",value:function render(){var e=this,t=this.props.classes,a=this.findApp("usermanager",this.props.secondaryApps);return o.a.createElement(K.a,{className:this.props.open?t.sidebarOpen:t.sidebarClosed},o.a.createElement(K.a,{className:this.props.open?t.sidebarUserInfo:t.sidebarUserInfoClosed},o.a.createElement("div",{className:t.sidebarProfileIcon},o.a.createElement(Z.a,{style:{width:60,height:60}})),o.a.createElement("div",{className:t.sidebarProfileName},o.a.createElement(Q.a,{component:"div",type:"title"},this.props.user.firstName," ",this.props.user.lastName)),o.a.createElement("div",{className:t.sidebarButtons},o.a.createElement(_.a,{type:"link",onClick:this.handleLogout},"Logout"),a&&o.a.createElement(_.a,{type:"link",onClick:function onClick(){return window.location.href=a.path+"#/u/"+e.props.user.name+"/account"}},"Profile"))),o.a.createElement("div",{className:this.props.open?t.appListsOpen:t.appListsClosed},o.a.createElement("div",{style:{gridColumn:"1",gridRow:"1"}},o.a.createElement("br",null)),o.a.createElement($.a,{style:{gridColumn:"1",gridRow:"2"}},this.props.apps&&this.props.apps.map((function(a){return o.a.createElement($.a.Item,{key:a.path,onClick:function onClick(){return window.location.href=a.path}},"home"===a.slug&&o.a.createElement(_.a,{size:"large",shape:"circle",icon:o.a.createElement(G.a,{style:{marginRight:"0px"}})}),"files"===a.slug&&o.a.createElement(_.a,{size:"large",shape:"circle",icon:o.a.createElement(V.a,{style:{marginRight:"0px"}})}),"photos"===a.slug&&o.a.createElement(_.a,{size:"large",shape:"circle",icon:o.a.createElement(q.a,{style:{marginRight:"0px"}})}),o.a.createElement("span",{className:e.props.open?t.openLabel:t.closedLabel},a.label))}))),o.a.createElement($.a,{style:{gridColumn:"1",gridRow:"3"},className:this.props.open?t.closedLabel:t.openLabel},"`    ",o.a.createElement(_.a,{size:"large",shape:"circle",icon:o.a.createElement(J.a,{style:{marginLeft:"0px",marginRight:"0px"}}),onClick:function onClick(){return window.location.href="/usermanager/index.html"}}),"`")))}}]),Sidebar}(i.Component),ne=Object(T.a)((function styleSheet(e){return{sidebarOpen:{width:"240px",minHeight:"100vh",height:"100%",background:"#fff"},sidebarClosed:{width:"72px",minHeight:"100vh",height:"100%",background:"#fff"},sidebarUserInfo:{width:"100%",padding:"8px",display:"grid",gridGap:"8px",gridTemplateRows:"auto",gridTemplateColumns:"60px auto"},sidebarUserInfoClosed:{display:"none"},sidebarProfileIcon:{gridColumn:"1",gridRow:"1"},sidebarProfileName:{gridColumn:"2",gridRow:"1",alignSelf:"center"},sidebarButtons:{gridColumn:"1/3",gridRow:"2",justifySelf:"center"},appListsOpen:{display:"grid",gridGap:"0px",gridTemplateRows:"24px auto",gridTemplateColumns:"auto",marginTop:"16px"},appListsClosed:{height:"90%",display:"grid",gridGap:"0px",gridTemplateRows:"0px auto 72px",gridTemplateColumns:"auto"},openLabel:{display:"inline",marginLeft:"10px",fontSize:"16px"},closedLabel:{display:"none"}}}))(ae),ie=a(339),oe=a(836),re=a(809),le=a(810),se=a(309),ce=a.n(se),de=a(308),pe=a.n(de),ue=function(e){Object(C.a)(AppHeader,e);var t=Object(k.a)(AppHeader);function AppHeader(e,a){var n;return Object(w.a)(this,AppHeader),(n=t.call(this,e)).handleButtonClick=function(e){},n.handleMenuClick=function(e){},n.state={openMoreMenu:!1},n.handleToggle=n.handleToggle.bind(Object(M.a)(n)),n.handleOpenMoreMenu=n.handleOpenMoreMenu.bind(Object(M.a)(n)),n.handleLogout=n.handleLogout.bind(Object(M.a)(n)),n}return Object(y.a)(AppHeader,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return e.onToggle!==this.props.onToggle||e.apps!==this.props.apps||t.openMoreMenu!==this.state.openMoreMenu}},{key:"handleOpenMoreMenu",value:function handleOpenMoreMenu(e){this.setState({openMoreMenu:!0,openMoreMenuAnchorEl:e.currentTarget})}},{key:"handleToggle",value:function handleToggle(){this.props.onToggle&&this.props.onToggle()}},{key:"handleNavClick",value:function handleNavClick(e){this.props.onNavClick&&this.props.onNavClick(e)}},{key:"handleMenuClose",value:function handleMenuClose(){this.setState({openMoreMenu:!1})}},{key:"handleLogout",value:function handleLogout(){window.localStorage.clear(),te.logout.source.next(!0),window.location="/"}},{key:"render",value:function render(){var e=this,t=this.props.classes;return o.a.createElement(R.a,{className:t.root,position:"static"},o.a.createElement(L.a,null,o.a.createElement(re.a,{onClick:this.handleToggle,className:t.menuButton,color:"secondary","aria-label":"Menu"},o.a.createElement(pe.a,null)),o.a.createElement(Q.a,{variant:"h6",color:"inherit",className:t.flex,style:{fontWeight:"300"},onClick:function onClick(){return window.location="/home/index.html"}},"Family Data Manager"),o.a.createElement(re.a,{"aria-label":"More","aria-owns":this.state.open?"long-menu":null,"aria-haspopup":"true",onClick:this.handleOpenMoreMenu,className:t.moreButton},o.a.createElement(ce.a,null)),o.a.createElement(ie.a,{id:"long-menu",keepMounted:!0,anchorEl:this.state.openMoreMenuAnchorEl,open:this.state.openMoreMenu},o.a.createElement(oe.a,{onClick:function onClick(){e.handleLogout(),e.handleMenuClose()}},"Logout"),o.a.createElement(le.a,null),this.props.apps&&this.props.apps.map((function(t){return o.a.createElement(oe.a,{key:t.path,color:"secondary",onClick:function onClick(){window.location=t.path,e.handleMenuClose()}},t.label)})))))}}]),AppHeader}(i.Component),he=Object(T.a)((function styleSheet(e){return{root:{width:"100%",height:"64px"},headerContainer:{display:"grid",gridTemplateRows:"auto",gridTemplateColumns:"48px auto 48px"},hamburgerMenu:{display:"block",gridRow:"1",gridColumn:"1"},mainSection:{gridRow:"1",gridColumn:"2"},rightSection:{gridRow:"2",gridColumn:"3",textAlign:"right"},flex:{flex:1},menuButton:{marginLeft:-12,marginRight:20,color:"#ffffff"},moreButton:{color:"#ffffff"}}}))(ue),me=new function AppSettings(){Object(w.a)(this,AppSettings),this.baseHost=new ee.BehaviorSubject(null)},fe=new(function(){function LoadClientAppsService(){Object(w.a)(this,LoadClientAppsService),this.isLoading=new ee.BehaviorSubject(!1),this.source=new ee.Subject,this.sink=new ee.Subject,this.source.subscribe(this.loadApps.bind(this))}return Object(y.a)(LoadClientAppsService,[{key:"loadApps",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n,i,o,r,l,s,c;return b.a.wrap((function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return t=me.baseHost.getValue()||"",a=t+"/api/v1/apps/",(n=new Headers).append("Accept","application/hal+json"),this.isLoading.next(!0),e.next=7,fetch(a,{method:"GET",cache:"no-cache",headers:n,credentials:"include"});case 7:return i=e.sent,e.next=10,i.json();case 10:o=e.sent,200==i.status&&o._embedded&&o._embedded.apps&&(r=[],l=[],o._embedded.apps.forEach((function(e){e.primary?r.push(e):l.push(e)})),s=r.sort((function(e,t){return e.order-t.order})),c=l.sort((function(e,t){return e.order-t.order})),this.sink.next({primaryApps:s,secondaryApps:c}));case 12:case"end":return e.stop()}}),_callee,this)})));return function loadApps(t){return e.apply(this,arguments)}}()}]),LoadClientAppsService}()),ge=function(e){Object(C.a)(AppShell,e);var t=Object(k.a)(AppShell);function AppShell(e,a){var n;Object(w.a)(this,AppShell),n=t.call(this,e);var i=window.localStorage.getItem("AppShell.isOpen");return i||(i=void 0===e.open||e.open),n.state={isMounted:!0,isOpen:Boolean(i)},n.handleOpenCloseToggle=n.handleOpenCloseToggle.bind(Object(M.a)(n)),n.handleOpenMoreMenu=n.handleOpenMoreMenu.bind(Object(M.a)(n)),n}return Object(y.a)(AppShell,[{key:"shouldComponentUpdate",value:function shouldComponentUpdate(e,t){return e.open!==this.props.open||e.user!==this.props.user||e.children!==this.props.children||t.isOpen!==this.state.isOpen||t.primaryApps!==this.state.primaryApps||t.secondaryApps!==this.state.secondaryApps}},{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({isMounted:!0}),te.navigateTo.pipe(Object(z.a)((function(){return e.state.isMounted}))).subscribe(function(e){"://"!==e&&"://"===e.substring(0,3)?window.location.href=e.substring(2):this.props.history&&this.props.history.push(e)}.bind(this)),fe.sink.pipe(Object(z.a)((function(){return e.state.isMounted}))).subscribe((function(t){t&&e.setState({primaryApps:t.primaryApps||[],secondaryApps:t.secondaryApps||[]})})),fe.source.next(!0)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({isMounted:!1})}},{key:"handleOpenMoreMenu",value:function handleOpenMoreMenu(e){this.setState({openMoreMenu:!0,openMoreMenuAnchorEl:e.currentTarget})}},{key:"handleOpenCloseToggle",value:function handleOpenCloseToggle(){var e=!this.state.isOpen;this.setState({isOpen:e}),window.localStorage.setItem("AppShell.isOpen",e)}},{key:"handleLogout",value:function handleLogout(){window.localStorage.clear(),te.logout.source.next(!0),te.navigateTo.next("://")}},{key:"render",value:function render(){var e=this.props.classes;return this.props.user?o.a.createElement("div",{className:this.state.isOpen?e.dashboardShellContainerOpen:e.dashboardShellContainerClosed},o.a.createElement("header",{className:e.header},o.a.createElement(he,{apps:this.state.secondaryApps,onToggle:this.handleOpenCloseToggle,onNavClick:function onNavClick(e){return window.location=e}})),o.a.createElement(ne,{user:this.props.user,apps:this.state.primaryApps,secondaryApps:this.state.secondaryApps,open:this.state.isOpen,onNavClick:function onNavClick(e){return window.location=e}}),o.a.createElement("div",{className:e.main},this.props.children)):o.a.createElement("div",null)}}]),AppShell}(i.Component),be=Object(S.f)(Object(T.a)((function styleSheet(e){return{dashboardShellContainerOpen:{display:"grid",gridTemplateRows:"64px auto",gridTemplateColumns:"240px auto"},dashboardShellContainerClosed:{display:"grid",gridTemplateRows:"64px auto",gridTemplateColumns:"72px auto"},header:{gridColumn:"1/3",gridRow:"1",position:"inherit",height:"64px"},main:{fontSize:".5rem",background:"#eee"}}}))(ge)),ve=a(823),we=a(821),ye=function(e){Object(C.a)(NewFolderDialog,e);var t=Object(k.a)(NewFolderDialog);function NewFolderDialog(e,a){var n;return Object(w.a)(this,NewFolderDialog),(n=t.call(this,e)).showModal=function(){n.setState({open:!0})},n.hideModal=function(){n.setState({open:!1}),n.props.onCancel&&n.props.onCancel()},n.state={folderName:"",open:!1},n.handleSave=n.handleSave.bind(Object(M.a)(n)),n}return Object(y.a)(NewFolderDialog,[{key:"componentDidMount",value:function componentDidMount(){this.setState({isMounted:!0,open:this.props.open})}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({isMounted:!1})}},{key:"handleSave",value:function handleSave(){this.props.onSave&&this.state.folderName.length>0&&this.props.onSave(this.state.folderName),this.setState({open:!1})}},{key:"render",value:function render(){var e=this,t=this.props.t;return o.a.createElement(ve.a,{visible:this.state.open,onCancel:this.hideModal,onOk:this.handleSave,okText:t("label.create"),cancelText:t("label.cancel"),title:t("label.createNewFolder")},o.a.createElement(we.a,{id:"newFolderName",label:t("label.folderName"),value:this.state.folderName,onChange:function onChange(t){return e.setState({folderName:t.target.value})},margin:"dense"}))}}]),NewFolderDialog}(i.Component),Ce=Object(A.a)()(Object(T.a)((function styleSheet(e){return{}}))(ye)),ke=new(function(){function GetFilesAndFoldersService(){Object(w.a)(this,GetFilesAndFoldersService),this.isLoading=new ee.BehaviorSubject(!1),this.sink=new ee.Subject,this.source=new ee.Subject,this.source.subscribe(function(e){this.getFilesAndFolders(e)}.bind(this))}return Object(y.a)(GetFilesAndFoldersService,[{key:"getFilesAndFolders",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n,i,o,r,l;return b.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return t=me.baseHost.getValue()||"",a=t+"/content/",e&&e.length>1&&(a=e.startsWith("http")?e:t+e),(n=new Headers).append("Accept","application/hal+json"),this.isLoading.next(!0),s.next=8,fetch(a,{method:"GET",cache:"no-cache",headers:n,credentials:"include"});case 8:return i=s.sent,s.next=11,i.json();case 11:if(o=s.sent,200!=i.status){s.next=17;break}o._embedded?(r=o._embedded.nodes.filter((function(e){return!e.name.startsWith(".")})),this.sink.next(r)):this.sink.next([]),this.isLoading.next(!1),s.next=25;break;case 17:return this.isLoading.next(!1),s.t0=i.status,s.t1=i.statusText,s.next=22,i.text();case 22:s.t2=s.sent,l={code:s.t0,status:s.t1,message:s.t2},this.sink.error(l);case 25:case"end":return s.stop()}}),_callee,this)})));return function getFilesAndFolders(t){return e.apply(this,arguments)}}()},{key:"getFilesAndFoldersOld",value:function getFilesAndFoldersOld(e){var t=this,a=me.baseHost.getValue();if(void 0!==e&&e.length>0){var n=a+e;request.get(n).withCredentials().set("Accept","application/json").end((function(e,a){if(e)if(401===e.status)te.navigateTo.next("/");else if(403===e.status)te.alert.next("You do not have permission to access these files");else{var n={code:e.status,status:e.statusText,message:e.responseText};t.sink.error(n)}else{var i=[];a.body&&(i=a.body.filter((function(e){return!e.name.toString().startsWith(".")}))),t.sink.next(i)}}))}}}]),GetFilesAndFoldersService}()),xe=a(818),Se=a(826),Fe=a(815),Oe=a(824),Ee=a(822),De=a(199),je=a(825),Te=a(811),Ne=a(812),Me=a(813),Ae=a(814),Re=a(278),Le=a.n(Re),Ue=Oe.a.TextArea,Pe=Ee.a.TabPane,Ie=De.a.Option,He=function(e){Object(C.a)(SingleImageView,e);var t=Object(k.a)(SingleImageView);function SingleImageView(e,a){var n;return Object(w.a)(this,SingleImageView),(n=t.call(this,e,a)).state={keyword:"",tabIndex:n.props.tabIndex?n.props.tabIndex:0},n.handleRatingChange=n.handleRatingChange.bind(Object(M.a)(n)),n.handleTagChange=n.handleTagChange.bind(Object(M.a)(n)),n.handleDescriptionChange=n.handleDescriptionChange.bind(Object(M.a)(n)),n.handleDescriptionSave=n.handleDescriptionSave.bind(Object(M.a)(n)),n}return Object(y.a)(SingleImageView,[{key:"handleRatingChange",value:function handleRatingChange(e){this.props.node.rating=e,this.props.onRatingChange&&this.props.onRatingChange(this.props.node),this.setState({rating:e})}},{key:"handleTagChange",value:function handleTagChange(e){this.props.node.tags=e,this.props.onTagChange&&this.props.onTagChange(this.props.node),this.setState({tags:e})}},{key:"handleDescriptionChange",value:function handleDescriptionChange(e){this.props.node.description=e.currentTarget.value,this.setState({description:e.currentTarget.value})}},{key:"handleDescriptionSave",value:function handleDescriptionSave(e){this.props.onDescriptionChange&&this.props.onDescriptionChange(this.props.node)}},{key:"render",value:function render(){var e=this.props.classes,t=[];return this.props.node.tags&&this.props.node.tags.map((function(e){t.push(o.a.createElement(Ie,{key:e},e))})),o.a.createElement("div",{className:e.gridListRoot},o.a.createElement("div",{className:e.itemPreview},o.a.createElement("div",{style:{height:"100%",maxWidth:"100%",textAlign:"center"}},o.a.createElement("img",{src:me.baseHost.getValue()+this.props.node.path,alt:this.props.node.path,style:{maxHeight:"100%",maxWidth:"100%",alignSelf:"center"}}))),o.a.createElement("div",{className:e.itemRating},o.a.createElement(je.a,{allowHalf:!0,onChange:this.handleRatingChange,value:this.props.node.rating,style:{float:"right"}})),o.a.createElement("div",{className:e.itemKeywords},o.a.createElement(Q.a,{variant:"h6"},"Keywords:"),o.a.createElement(De.a,{mode:"tags",style:{width:"100%"},placeholder:"Tags Mode",value:this.props.node.tags,onChange:this.handleTagChange},t)),o.a.createElement("div",{className:e.itemDescription},o.a.createElement(Q.a,{variant:"h6"},"Description:"),o.a.createElement(Ue,{id:"description",rows:3,value:this.props.node.description,onChange:this.handleDescriptionChange,onBlur:this.handleDescriptionSave})),o.a.createElement("div",{className:e.itemInfo},o.a.createElement(Ee.a,{defaultActiveKey:"details",style:{width:"100%"}},o.a.createElement(Pe,{tab:"Details",key:"details"},o.a.createElement("div",null,o.a.createElement(Te.a,null,o.a.createElement(Ne.a,null,o.a.createElement(Me.a,{style:{padding:"8px"}},o.a.createElement(Ae.a,{component:"th",scope:"row",align:"right",style:{padding:"8px"}},"Type"),o.a.createElement(Ae.a,{align:"left"},this.props.node.mimeType)),o.a.createElement(Me.a,null,o.a.createElement(Ae.a,{component:"th",scope:"row",align:"right",style:{padding:"8px"}},"Resolution"),o.a.createElement(Ae.a,{align:"left"},this.props.node.width," x ",this.props.node.height)),o.a.createElement(Me.a,null,o.a.createElement(Ae.a,{component:"th",scope:"row",align:"right",style:{padding:"8px"}},"Created"),o.a.createElement(Ae.a,{align:"left"},Le()(this.props.node.dateCreated).format("MMM Do YYYY, h:mm:ss a"))),o.a.createElement(Me.a,null,o.a.createElement(Ae.a,{component:"th",scope:"row",align:"right",style:{padding:"8px"}},"Modified"),o.a.createElement(Ae.a,{align:"left"},Le()(this.props.node.dateLastModified).format("MMM Do YYYY, h:mm:ss a"))))),o.a.createElement("br",null),o.a.createElement("p",null,this.props.node.path))),o.a.createElement(Pe,{tab:"Versions",key:"versions"},"(coming soon)"),o.a.createElement(Pe,{tab:"Duplicates",key:"duplicates"},"(coming soon)"))))}}]),SingleImageView}(i.Component),_e=Object(T.a)((function styleSheet(e){return{gridListRoot:{margin:"0px",display:"grid",gridGap:"8px",gridTemplateRows:"175px 25px 50px 25px 50px 25px 25px 3fr",gridTemplateColumns:"16px auto 16px",background:e.palette.background.paper,justifyContent:"center"},itemPreview:{gridRow:"1",gridColumn:"2",justifyContent:"center"},itemRating:{gridRow:"2",gridColumn:"2"},itemKeywords:{gridRow:"3",gridColumn:"2"},itemDescription:{gridRow:"5",gridColumn:"2",width:"100%"},itemInfo:{gridRow:"8",gridColumn:"2"}}}))(He),Ge=function(e){Object(C.a)(TableView,e);var t=Object(k.a)(TableView);function TableView(e){var a;return Object(w.a)(this,TableView),(a=t.call(this,e)).state={isMounted:!0,showDeleteFileDialog:!1,showSidebar:!1,pendingFileToDelete:[],folders:[],files:[],selectedFile:{}},a.handleRowClick=a.handleRowClick.bind(Object(M.a)(a)),a.handleFileDelete=a.handleFileDelete.bind(Object(M.a)(a)),a.handleFileDeleteConfirmation=a.handleFileDeleteConfirmation.bind(Object(M.a)(a)),a.handleFolderDelete=a.handleFolderDelete.bind(Object(M.a)(a)),a.handleFolderDeleteConfirmation=a.handleFolderDeleteConfirmation.bind(Object(M.a)(a)),a.handleNodeChange=a.handleNodeChange.bind(Object(M.a)(a)),a}return Object(y.a)(TableView,[{key:"handleRowClick",value:function handleRowClick(e){var t=e.currentTarget.attributes["data-id"].value;this.props.onRowClick(t)}},{key:"onTableChangeHandler",value:function onTableChangeHandler(e,t,a,n){console.log("onTableChange")}},{key:"handleFileDelete",value:function handleFileDelete(e){var t=e.currentTarget.attributes["data-path"].value;return this.setState({showDeleteFileDialog:!0,deletePath:t}),!1}},{key:"handleFileDeleteConfirmation",value:function handleFileDeleteConfirmation(e){return this.props.onDeleteFile&&this.props.onDeleteFile(this.state.deletePath),this.setState({showDeleteFileDialog:!1,deletePath:null}),!1}},{key:"handleFolderDelete",value:function handleFolderDelete(e){var t=e.currentTarget.attributes["data-path"].value;return this.setState({showDeleteFolderDialog:!0,deletePath:t}),!1}},{key:"handleFolderDeleteConfirmation",value:function handleFolderDeleteConfirmation(e){return this.props.onDeleteFolder&&this.props.onDeleteFolder(this.state.deletePath),this.setState({showDeleteFolderDialog:!1,deletePath:null}),!1}},{key:"handleNodeChange",value:function handleNodeChange(e){this.props.onNodeChange&&this.props.onNodeChange(e)}},{key:"fieldNameSorter",value:function fieldNameSorter(e,t,a){return console.log(a),"nt:folder"===e.primaryType&&"nt:file"===t.primaryType?-1:"nt:file"===e.primaryType&&"nt:folder"===t.primaryType?1:e.primaryType===t.primaryType?e.name.trim().toLowerCase()<t.name.trim().toLowerCase()?-1:e.name.trim().toLowerCase()>t.name.trim().toLowerCase()?1:0:0}},{key:"fieldDateSorter",value:function fieldDateSorter(e,t,a,n){return"nt:folder"===e.primaryType&&"nt:file"===t.primaryType?-1:"nt:file"===e.primaryType&&"nt:folder"===t.primaryType?1:e.primaryType===t.primaryType?e.createdDate<t.createdDate?"ascend"===a?1:-1:e.createdDate>t.createdDate?"ascend"===a?-1:1:0:0}},{key:"getColumns",value:function getColumns(){var e=this,t=this.props.t;return[{title:"",dataIndex:"type",width:30,render:function render(e,t){return"nt:folder"===t.primaryType?o.a.createElement(V.a,{style:{fontSize:"24px"}}):"nt:file"===t.primaryType&&t.mimeType.startsWith("image/")?o.a.createElement("img",{src:t.path+"?size=100",alt:"",style:{width:"24px"}}):o.a.createElement(W.a,{style:{fontSize:"24px"}})}},{title:t("label.name","Name"),dataIndex:"name",key:"name",sorter:this.fieldNameSorter,render:function render(t,a){return"nt:folder"===a.primaryType?o.a.createElement(x.b,{to:a.path},t):o.a.createElement("a",{onClick:function onClick(){return e.setState({showSidebar:!0,selectedFile:a})}},t)}},{title:t("label.dateCreated","Date Created"),dataIndex:"dateCreated",key:"dateCreated",width:200,responsive:["md"],sorter:this.fieldDateSorter,render:function render(e){return o.a.createElement("span",null,e?t("date",{date:e}):"")}},{title:t("label.action","Action"),key:"action",width:200,render:function render(a,n){var i=n._links.download&&e.props.onDownload?o.a.createElement(Fe.a,{type:"link","data-path":n.path,onClick:function onClick(){return e.props.onDownload(n.name,n._links.download.href)}},t("label.download","Download")):o.a.createElement("span",null),r=n._links.self?o.a.createElement(Fe.a,{type:"link","data-path":n.path,onClick:e.handleFileDelete},t("label.delete","Delete")):o.a.createElement("span",null),l=o.a.createElement("span",null);return"nt:file"===n.primaryType&&n.mimeType.startsWith("image/")?o.a.createElement(H.b,{size:"middle"},i,r,l):o.a.createElement(H.b,{size:"middle"},i,r)}}]}},{key:"getRowSelection",value:function getRowSelection(){return{onChange:function onChange(e,t){console.log("selectedRowKeys: ".concat(e),"selectedRows: ",t)},getCheckboxProps:function getCheckboxProps(e){return{disabled:"application/folder"===e.contentType,name:e.name}}}}},{key:"render",value:function render(){var e=this,t=(this.props.classes,this.props.t),a=[];(a=(a=a.concat(this.props.folders)).concat(this.props.files)).sort(this.fieldNameSorter);var i=this.getRowSelection();return o.a.createElement("div",null,o.a.createElement(xe.a,{rowKey:"path",loading:this.props.loading,columns:this.getColumns(),dataSource:a,size:"small",pagination:{pageSize:10,hideOnSinglePage:!1},sortDirections:["ascend","descend"],rowSelection:Object(n.a)({type:"checkbox"},i),onChange:this.onTableChangeHandler}),o.a.createElement(Se.a,{title:t("label.fileInfo","File Info"),placement:"right",closable:!0,getContainer:!1,width:"350",bodyStyle:{padding:"0px"},onClose:function onClose(){return e.setState({showSidebar:!1,selectedFile:{}})},visible:this.state.showSidebar},o.a.createElement(_e,{node:this.state.selectedFile,onRatingChange:this.handleNodeChange,onDescriptionChange:this.handleNodeChange,onTagChange:this.handleNodeChange})),o.a.createElement(ve.a,{visible:this.state.showDeleteFileDialog,onCancel:function onCancel(){e.setState({showDeleteFileDialog:!1})},onOk:this.handleFileDeleteConfirmation,okText:t("label.yes","Yes"),cancelText:t("label.no","No"),title:t("instr.areYouSure","Are you sure?")},o.a.createElement("p",null,t("instr.deleteFolderTitle","Do you want to delete this file?"))),o.a.createElement(ve.a,{visible:this.state.showDeleteFolderDialog,onCancel:function onCancel(){e.setState({showDeleteFolderDialog:!1})},onOk:this.handleFolderDeleteConfirmation,okText:t("label.yes","Yes"),cancelText:t("label.no","No"),title:t("instr.areYouSure","Are you sure?")},o.a.createElement("p",null,t("instr.deleteFolderConfirmation","Do you want to delete this folder and all files in it?"))))}}]),TableView}(o.a.PureComponent),We=Object(A.a)()(Object(S.f)(Ge)),Be=new(function(){function CreateFolderService(e,t){Object(w.a)(this,CreateFolderService),this.sink=new ee.Subject,this.source=new ee.Subject,this.isLoading=new ee.BehaviorSubject,this.source.subscribe(function(e){this.createDirectory(e)}.bind(this))}return Object(y.a)(CreateFolderService,[{key:"createDirectory",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n,i,o,r,l;return b.a.wrap((function _callee$(s){for(;;)switch(s.prev=s.next){case 0:return t=me.baseHost.getValue()||"",e.name,a=t+e.path+"/",(n=new FormData).append("name",e.name),n.append("jcr:primaryType","nt:folder"),s.prev=6,s.next=9,fetch(a,{method:"POST",body:n,credentials:"include"});case 9:if(200!=(i=s.sent).status){s.next=19;break}return s.next=13,i.json();case 13:o=s.sent,r=o._links.self.href,this.sink.next(r),this.isLoading.next(!1),s.next=20;break;case 19:throw new Error("Unknown Error");case 20:s.next=28;break;case 22:s.prev=22,s.t0=s.catch(6),console.dir(s.t0),l={code:s.t0.status,status:s.t0.statusText,message:s.t0.responseText},this.sink.error(l),this.isLoading.next(!1);case 28:case"end":return s.stop()}}),_callee,this,[[6,22]])})));return function createDirectory(t){return e.apply(this,arguments)}}()}]),CreateFolderService}()),Ve=a(112),ze=a(327),Ye=a.n(ze),$e=new(function(){function UploadFileService(e,t){var a=this;Object(w.a)(this,UploadFileService),this.sink=new ee.Subject,this.source=new ee.Subject,this.isLoading=new ee.BehaviorSubject,this.source.pipe(Object(Ve.b)((function(e){if(!Array.isArray(e))return a.uploadNextFile(e);for(var t=0;t<e.length;t++){e[t];return a.uploadNextFile(e)}}),3)).subscribe(console.debug)}return Object(y.a)(UploadFileService,[{key:"uploadNextFile",value:function uploadNextFile(e){var t=this;return e.file?ee.Observable.of(e).flatMap((function(a){return new Promise((function(a,n){return t.uploadFile(e).then((function(e){return a(e)})).catch((function(t){var a=1;return e.retry&&(a=e.retry+1),e.progress=0,e.retry=a,e.errorMsg="Retrying request ("+a+"/3)",n(t)}))}))})).retry(2).catch((function(t){return e.errorMsg=t.status+": "+t.message,e.progress=0,ee.Observable.of(t)})):null}},{key:"uploadFile",value:function uploadFile(e){var t=e.path;e.file.webkitRelativePath?t=e.file.webkitRelativePath:e.file.relativePath&&(t+=e.file.relativePath.substr(0,e.file.relativePath.lastIndexOf("/")));var a=new FormData;a.append("name",e.file.name),a.append("path",t),a.append("destination",t),a.append("file",e.file),a.append("type",e.file.type),a.append("size",e.file.size),a.append("jcr:primaryType","nt:file"),a.append("dam:date.created",e.file.lastModified),a.append("dam:date.modified",e.file.lastModified),console.log("Upload to:"+n+t);var n=me.baseHost.getValue()||"",i=n+e.path;return Ye.a.post(i).withCredentials().charset("UTF-8").send(a).parse((function(t){t.text;e.onSuccess&&e.onSuccess(null,e.file)})).on("progress",(function(t){e.progress=t.percent,e.onProgress&&e.onProgress({percent:t.percent})}))}},{key:"execute",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n,i,o,r,l,s,c,d;return b.a.wrap((function _callee$(p){for(;;)switch(p.prev=p.next){case 0:return t=me.baseHost.getValue(),a=e.file.name,n=t+e.path,e.file.type,i="/",e.file.webkitRelativePath&&(i=e.file.webkitRelativePath),(o=new FormData).append("name",a),o.append("path",e.path),o.append("destination",i),o.append("file",e.file),o.append("type",e.file.type),o.append("size",e.file.size),o.append("jcr:primaryType","nt:file"),o.append("dam:date.created",e.file.lastModified),o.append("dam:date.modified",e.file.lastModified),p.prev=16,p.next=19,fetch(n,{method:"POST",body:o,credentials:"include"});case 19:r=p.sent,l=r.body.getReader(),s=0;case 22:return p.next=25,l.read();case 25:if(!(c=p.sent).done){p.next=31;break}return console.log("Fetch complete"),e.onSuccess&&e.onSuccess(null,e.file),this.isLoading.next(!1),p.abrupt("break",36);case 31:s+=c.value.length,console.log("Received",s,"/",e.file.size,"bytes of data so far | ",e.file.name),e.onProgress&&e.onProgress({percent:s/e.file.size*100}),p.next=22;break;case 36:p.next=45;break;case 38:p.prev=38,p.t0=p.catch(16),e.onError&&e.onError(p.t0),console.dir(p.t0),d={code:p.t0.status,status:p.t0.statusText,error:p.t0.message},this.sink.error(d),this.isLoading.next(!1);case 45:case"end":return p.stop()}}),_callee,this,[[16,38]])})));return function execute(t){return e.apply(this,arguments)}}()}]),UploadFileService}()),qe=new(function(){function DeleteFileOrFolderService(){Object(w.a)(this,DeleteFileOrFolderService),this.isLoading=new ee.BehaviorSubject}return Object(y.a)(DeleteFileOrFolderService,[{key:"execute",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n;return b.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return t=me.baseHost.getValue()||"",a=t+e,i.prev=3,this.isLoading.next(!0),i.next=7,fetch(a,{method:"DELETE",credentials:"include"});case 7:if(200!=i.sent.status){i.next=12;break}this.isLoading.next(!1),i.next=13;break;case 12:throw new Error("Unknown Error");case 13:i.next=21;break;case 15:i.prev=15,i.t0=i.catch(3),console.dir(i.t0),n={code:i.t0.status,status:i.t0.statusText,message:i.t0.responseText},this.sink.error(n),this.isLoading.next(!1);case 21:case"end":return i.stop()}}),_callee,this,[[3,15]])})));return function execute(t){return e.apply(this,arguments)}}()}]),DeleteFileOrFolderService}()),Je=new(function(){function SaveFileOrFolderService(e,t){Object(w.a)(this,SaveFileOrFolderService),this.sink=new ee.Subject,this.source=new ee.Subject,this.isLoading=new ee.BehaviorSubject,this.source.subscribe(function(e){this.execute(e)}.bind(this))}return Object(y.a)(SaveFileOrFolderService,[{key:"execute",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){var t,a,n;return b.a.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return t=me.baseHost.getValue()||"",e.name,a=t+e.path,i.prev=3,i.next=6,fetch(a,{method:"PUT",body:JSON.stringify(e),credentials:"include"});case 6:if(200!=i.sent.status){i.next=11;break}this.isLoading.next(!1),i.next=12;break;case 11:throw new Error("Unknown Error");case 12:i.next=20;break;case 14:i.prev=14,i.t0=i.catch(3),console.dir(i.t0),n={code:i.t0.status,status:i.t0.statusText,message:i.t0.responseText},this.sink.error(n),this.isLoading.next(!1);case 20:case"end":return i.stop()}}),_callee,this,[[3,14]])})));return function execute(t){return e.apply(this,arguments)}}()}]),SaveFileOrFolderService}()),Ke=function(e){Object(C.a)(FilesPage,e);var t=Object(k.a)(FilesPage);function FilesPage(e,a){var n;return Object(w.a)(this,FilesPage),(n=t.call(this,e)).handleCloseNewFolderDialog=function(e){n.setState({showNewFolderDialog:!1}),console.log(n.state.showNewFolderDialog)},n.state={isLoading:!0,isMounted:!0,canAddFile:!0,canAddFolder:!0,showUploadSidebar:!1,showNewFolderDialog:!1,showUploadDialog:!1,selectedFiles:[],uploadFiles:[],path:"/content/files",visibleRoot:"/content/files",folders:[],files:[]},n.fileInputFieldRef=o.a.createRef(),n.uploadRef=o.a.createRef(),n.handleFileDelete=n.handleFileDelete.bind(Object(M.a)(n)),n.handleFolderDelete=n.handleFolderDelete.bind(Object(M.a)(n)),n.handleNodeChange=n.handleNodeChange.bind(Object(M.a)(n)),n}return Object(y.a)(FilesPage,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({isMounted:!0}),this.validatePath(),ke.isLoading.takeWhile((function(){return e.state.isMounted})).subscribe((function(t){e.setState({isLoading:t})})),Be.isLoading.takeWhile((function(){return e.state.isMounted})).subscribe((function(t){e.setState({isLoading:t})})),ke.sink.takeWhile((function(){return e.state.isMounted})).subscribe((function(t){t.folders;var a=t.files||[];e.setState({folder:t,folders:t,files:a})})),Je.sink.takeWhile((function(){return e.state.isMounted})).subscribe({next:function next(e){return U.b.info("Item has been saved")},error:function error(e){return U.b.info("Error saving item")}}),this.props.location.pathname.startsWith(this.state.path)?(this.setState({path:this.props.location.pathname,showNewFolderDialog:!1}),ke.source.next(this.props.location.pathname)):(this.setState({showNewFolderDialog:!1}),ke.source.next(this.state.path))}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({isMounted:!1})}},{key:"componentDidUpdate",value:function componentDidUpdate(e,t){var a=this.state.path,n=this.validatePath();a!==n&&ke.source.next(n)}},{key:"validatePath",value:function validatePath(){var e=this.props.path;return this.props.location.pathname&&this.props.location.pathname.toString().startsWith(this.state.visibleRoot)&&(e=this.props.location.pathname),e||(e=this.state.visibleRoot),e.toString().startsWith(this.state.visibleRoot)?(this.setState({path:e}),e):(console.log("Invalid Path: "+e),this.props.path)}},{key:"parseBreadcrumbPath",value:function parseBreadcrumbPath(e,t){var a=e.split("/");e.startsWith("/")&&(a=a.slice(1));for(var n=[],i=2;i<a.length;i++){var o=a[i];n.push({label:o,path:"/"+a.slice(0,i+1).join("/")})}return n}},{key:"handleCreateFolder",value:function handleCreateFolder(e){var t=this;this.state.folder.id,me.baseHost.value;Be.sink.takeWhile((function(){return t.state.isMounted})).subscribe(function(e){console.log("Create Folder:"+e),this.setState({showUploadSidebar:!1,showNewFolderDialog:!1,showUploadDialog:!1}),ke.source.next(this.state.path)}.bind(this)),Be.source.next({path:this.state.path,name:e})}},{key:"handleFileDelete",value:function(){var e=Object(v.a)(b.a.mark((function _callee(e){return b.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.execute(e);case 2:ke.source.next(this.state.path);case 3:case"end":return t.stop()}}),_callee,this)})));return function handleFileDelete(t){return e.apply(this,arguments)}}()},{key:"handleFolderDelete",value:function(){var e=Object(v.a)(b.a.mark((function _callee2(e){return b.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qe.execute(e);case 2:ke.source.next(this.state.path);case 3:case"end":return t.stop()}}),_callee2,this)})));return function handleFolderDelete(t){return e.apply(this,arguments)}}()},{key:"handleFileDownload",value:function handleFileDownload(e,t){var a=document.createElement("a");document.body.appendChild(a),a.href=t,a.download=e,a.click(),a.remove()}},{key:"UploadOnChangeHandler",value:function UploadOnChangeHandler(e){var t=e.file.status;if("done"===t){if(U.b.success("".concat(e.file.name," file uploaded successfully.")),e.fileList){var a=!0;e.fileList.forEach((function(e){"done"!==e.status&&(a=!1)})),a&&window.location.reload()}}else"error"===t&&U.b.error("".concat(e.file.name," file upload failed."))}},{key:"UploadCustomRequestHandler",value:function UploadCustomRequestHandler(e){$e.source.next({path:e.action,file:e.file,onError:e.onError,onProgress:e.onProgress,onSuccess:e.onSuccess})}},{key:"UploadItemRenderHandler",value:function UploadItemRenderHandler(e,t,a){if("done"!==t.status)return e}},{key:"handleOnRowClick",value:function handleOnRowClick(e){console.log(e)}},{key:"handleNodeChange",value:function handleNodeChange(e){Je.source.next(e)}},{key:"render",value:function render(){var e=this,t=this.props.classes,a=this.props.t,n=this.state.showUploadSidebar||this.state.uploadFiles.length>0||this.state.selectedFiles.length>0,i=P.a.Dragger,r=(this.props.location,{name:"file",multiple:!0,listType:"picture",withCredentials:!0,directory:!0,showUploadList:{showRemoveIcon:!0,showPreviewIcon:!1,showDownloadIcon:!1},action:this.props.location.pathname,onChange:this.UploadOnChangeHandler.bind(this),customRequest:this.UploadCustomRequestHandler.bind(this),itemRender:this.UploadItemRenderHandler.bind(this)});U.b.config({top:24,duration:.5,maxCount:3});var l=this.parseBreadcrumbPath(this.props.location.pathname);return o.a.createElement(be,{user:this.props.user,open:!1},o.a.createElement("div",{className:t.fileGrid},o.a.createElement(R.a,{color:"default",position:"static",elevation:0,className:t.fileGridAppBar},o.a.createElement(L.a,{className:t.toolbarContainer},o.a.createElement(Q.a,{variant:"h6",className:t.title},o.a.createElement(I.a,null,o.a.createElement(I.a.Item,{href:"/home/index.html"},o.a.createElement(G.a,null)),o.a.createElement(I.a.Item,{href:"#/"},o.a.createElement(W.a,null),o.a.createElement("span",null,a("label.files","Files"))),l.map((function(e){return o.a.createElement(I.a.Item,{key:e.path},o.a.createElement(x.b,{to:e.path},e.label))})))),o.a.createElement(H.b,null,o.a.createElement(_.a,{type:"primary",disabled:!this.state.canAddFolder,onClick:function onClick(){return e.setState({showNewFolderDialog:!0})},icon:o.a.createElement(B.a,null)},a("label.newFolder","New Folder"))))),o.a.createElement("div",{className:t.fileGridFileList,style:{gridColumn:n?"1/2":"1/3"}},o.a.createElement(We,{loading:this.state.isLoading,folders:this.state.folders,files:this.state.files,onRowClick:this.handleOnRowClick,onNodeChange:this.handleNodeChange,onDownload:this.handleFileDownload,onDeleteFile:this.handleFileDelete,onDeleteFolder:this.handleFolderDelete}),o.a.createElement("div",{style:{marginTop:"24px"}},o.a.createElement(i,Object.assign({},r,{ref:this.uploadRef}),o.a.createElement("p",{className:"ant-upload-drag-icon"},o.a.createElement(V.a,null)),o.a.createElement("p",{className:"ant-upload-text"},a("instr.clickOrDrag","Click or drag file to this area to upload")),o.a.createElement("p",{className:"ant-upload-hint"},a("instr.clickOrDragDesc","Support for a single or bulk upload."))))),o.a.createElement(Ce,{onSave:this.handleCreateFolder.bind(this),onCancel:this.handleCloseNewFolderDialog,open:this.state.showNewFolderDialog,path:this.state.path})),o.a.createElement("input",{type:"file",ref:this.fileInputFieldRef,style:{display:"none"},multiple:!0,onChange:this.handleFileChange}))}}]),FilesPage}(o.a.PureComponent),Qe=Object(A.a)()(Object(S.f)(Object(T.a)((function styleSheet(e){return{progress:{margin:"0 ".concat(2*e.spacing(),"px"),width:"100px",height:"100px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},toolbarContainer:{},fileGrid:{height:"100%",display:"grid",gridTemplateRows:"64px auto",gridTemplateColumns:"4fr minmax(2px, 400px)"},fileGridAppBar:{gridRow:"1",gridColumn:"1/3",zIndex:500,colorDefault:"#eeeeee"},fileGridFileList:{gridRow:"2",gridColumn:"1",margin:"24px"},fileGridSidebar:{gridRow:"2",gridColumn:"2",margin:"24px"},filePondSidebar:{gridRow:"2",gridColumn:"2",margin:"24px"},mainGrid:{height:"100%",overflow:"scroll",display:"grid",gridGap:"16px",gridTemplateRows:"1fr 1fr 1fr",gridTemplateColumns:"2fr 6fr"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}))(Ke))),Xe=new(function(){function GetUsersService(){Object(w.a)(this,GetUsersService),this.isLoading=new ee.BehaviorSubject(!1),this.source=new ee.Subject,this.sink=new ee.Subject,this.source.subscribe(this.getUser.bind(this))}return Object(y.a)(GetUsersService,[{key:"getUser",value:function getUser(e){var t=this,a=(me.baseHost.getValue()||"")+"/api/v1/auth/user/me",n=new Headers;n.append("pragma","no-cache"),n.append("cache-control","no-cache"),n.append("accept","application/json"),this.isLoading.next(!0),fetch(a,{method:"GET",mode:"cors",headers:n,credentials:"include"}).then((function(e){return e.redirected&&(console.log("redirect to: "+e.url),window.location=e.url),e})).then((function(e){return e.json()})).then((function(e){t.sink.next(e)})).catch((function(e){if(401===e.status||403===e.status)window.location="/";else{console.error(e.statusText);var a={code:e.status,status:e.statusText,message:e.responseText||e.message};t.sink.error(a)}}))}}]),GetUsersService}()),Ze=function(e){Object(C.a)(App,e);var t=Object(k.a)(App);function App(e,a){var n;return Object(w.a)(this,App),(n=t.call(this,e,a)).state={context:a,locale:"en-EN",isAuthenticated:!1,isLoading:!0,isMounted:!1},window.location.href.indexOf(":3000")>-1&&me.baseHost.next("http://localhost:9000"),n}return Object(y.a)(App,[{key:"componentDidMount",value:function componentDidMount(){var e=this;this.setState({isMounted:!0}),Xe.sink.takeWhile((function(){return e.state.isMounted})).subscribe(function(){var t=Object(v.a)(b.a.mark((function _callee(t){return b.a.wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=4;break}return a.next=3,j.changeLanguage("en-US");case 3:e.setState({isAuthenticated:!0,isLoading:!1,user:t});case 4:case"end":return a.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}()),Xe.source.next(null)}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.setState({isMounted:!1})}},{key:"render",value:function render(){var e=this,t=this.props.classes;return this.state.isLoading?o.a.createElement("div",null,o.a.createElement(N.a,{className:t.progress,size:50})):o.a.createElement(x.a,null,o.a.createElement(S.c,null,o.a.createElement(S.a,{path:"/",component:function component(){return o.a.createElement(Qe,{user:e.state.user})}})))}}]),App}(i.Component),et=Object(T.a)((function styleSheet(e){return{progress:{margin:"0 ".concat(2*e.spacing(),"px"),width:"100px",height:"100px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}))(Ze),tt=Object(s.a)({palette:{type:"light",primary:p.a,secondary:Object(n.a)({},h.a),error:f.a}});!function renderApp(){l.a.render(o.a.createElement(c.a,{theme:tt},o.a.createElement(et,null)),document.getElementById("root"))}()}},[[762,1,2]]]);
//# sourceMappingURL=main.dd3dcf81.chunk.js.map