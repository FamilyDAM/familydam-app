{"version":3,"sources":["library/actions/processors/LoadClientAppsService.js","library/actions/AppSettings.js","library/actions/processors/LogoutService.js","library/actions/AppActions.js","library/sidebar/Sidebar.js","library/appheader/AppHeader.js","library/appShell/AppShell.js","components/breadcrumb/Breadcrumb.js","components/filelist/FileListTableHead.js","actions/processors/GetFileAndFoldersService.js","actions/processors/GetFileDataService.js","actions/processors/UploadFileService.js","actions/processors/DeleteFileOrFolderService.js","actions/processors/CreateFolderService.js","actions/FileActions.js","library/loadingButton/LoadingButton.js","components/filelist/FileList.js","components/filelist/FileListTableToolbar.js","components/fileinfosidebar/FileInfoSidebar.js","components/uploaddialog/UploadDialog.js","components/newfolderdialog/NewFolderDialog.js","pages/files/FilesPage.js","library/actions/processors/GetUserService.js","library/actions/processors/GetAllUsersService.js","library/actions/UserActions.js","App.js","index.js","registerServiceWorker.js"],"names":["LoginService","source_","sink_","Object","classCallCheck","this","sink","undefined","subscribe","loadApps","bind","data_","_this","request","get","withCredentials","set","end","err","res","status","AppActions","navigateTo","next","_error403","code","message","error","console","dir","_error","statusText","responseText","primaryApps","body","apps","primary","secondaryApps","secondary","actions_AppSettings","baseHost","BehaviorSubject","basicUser","window","localStorage","getItem","basicPwd","LogoutService","getUser","username_","baseUrl","AppSettings","getValue","fetch","method","then","response","redirected","log","url","location","catch","actions_AppActions","Subject","logout","source","loadClientApps","loadClientAppsService","LoadClientAppsService","logoutService","Sidebar","props","context","possibleConstructorReturn","getPrototypeOf","call","handleNavClick","assertThisInitialized","path","onNavClick","clear","slug","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","app","value","return","_this2","classes","profileApp","findApp","react_default","a","createElement","Paper","className","open","sidebarOpen","sidebarClosed","sidebarUserInfo","sidebarUserInfoClosed","sidebarProfileIcon","AccountCircle_default","style","width","height","sidebarProfileName","Typography","component","type","user","firstName","lastName","sidebarButtons","Button","onClick","handleLogout","appListsOpen","appListsClosed","gridColumn","gridRow","openLabel","closedLabel","paddingLeft","paddingTop","List","map","item","ListItem","button","key","Avatar","marginRight","Folder_default","ListItemText","label","Component","injectIntl","withStyles","theme","background","padding","display","gridGap","gridTemplateRows","gridTemplateColumns","alignSelf","justifySelf","marginTop","AppHeader","state","openMoreMenu","handleToggle","handleOpenMoreMenu","event","setState","openMoreMenuAnchorEl","currentTarget","onToggle","AppBar","root","position","Toolbar","IconButton","menuButton","color","aria-label","Menu_default","variant","flex","aria-owns","aria-haspopup","moreButton","MoreVert_default","Menu","id","keepMounted","anchorEl","MenuItem","handleMenuClose","Divider","headerContainer","hamburgerMenu","mainSection","rightSection","textAlign","marginLeft","AppShell","isOpenCachedValue","isMounted","isOpen","handleOpenCloseToggle","takeWhile","substring","href","history","push","data","val","setItem","dashboardShellContainerOpen","dashboardShellContainerClosed","header","appheader_AppHeader","sidebar_Sidebar","main","children","withRouter","Breadcrumb","paths","parsePath","currentPathSubscription","dispose","nextProps","path_","_pathParts","split","currentPath","_paths","_pathQueryString","i","length","part","trim","level","cursor","breadcrumb","li","backgroundColor","listStyle","float","margin","&:before","content","&:after","FileListTableHead","createSortHandler","property","onRequestSort","_this$props","order","orderBy","TableHead","tableHead","TableRow","TableCell","TableSortLabel","active","direction","minWidth","fontSize","GetFilesAndFoldersService","getFilesAndFolders","_url","alert","_nodes","filter","f","name","toString","startsWith","GetFileDataService","getFiles","paths_","pathPromises","promise","Promise","all","results","nodes","reason","require","UploadFileService","fileQueue","file_","flatMap","Array","isArray","uploadNextFile","file","val_","Observable","of","req","resolve","reject","uploadFile","result","retry","progress","filePathName","uploadPath","webkitRelativePath","substr","lastIndexOf","relativePath","formData","FormData","append","size","lastModified","post","charset","send","parse","_ref","text","JSON","on","percent","FileActions","uploadProgress","DeleteFileOrFolderService","deleteFileOrFolder","delete","CreateFolderService","createDirectory","_name","username","info","debug","json","warn","actions_FileActions","getFileAndFolders","getFileData","createFolder","uploadCompleted","uploadError","getFilesAndFoldersService","getFileDataService","uploadFileService","deleteFileOrFolderService","createFolderService","LoadingButton","handleClick","e","btn","isLoading","CircularProgress","FileList","isCntlPressed","isSpacePressed","selected","selectedIndex","indexOf","newSelected","concat","slice","onSelectionChange","handleRequestSort","files","sort","b","rootPath","showDeleteFileDialog","showDeleteFolderDialog","handleFileDelete","handleFolderDelete","handleFileDownload","handleFolderDownload","handleCancelDialog","handleFileDeleteOk","handleFolderDeleteOk","handleKeyDown","handleKeyUp","document","addEventListener","preventDefault","fileActions","sortBy","sortedFiles","toLowerCase","newProps","keyCode","pendingFileToDelete","pendingFolderToDelete","name_","link","appendChild","download","click","_this3","_fileToDelete","onDelete","_this4","_this5","_this$state","tableWrapper","Table","filelist_FileListTableHead","numSelected","rowCount","TableBody","node","isSelected","FileList_FolderRow","folder","onDownload","onNavigate","FileList_FileRow","onKeyDown","Dialog","ignoreBackdropClick","maxWidth","DialogTitle","DialogContent","DialogActions","loadingButton_LoadingButton","FolderRow","hover","role","tabIndex","aria-checked","Delete_default","CloudDownload_default","FileRow","endsWith","src","alt","Photo_default","moment","format","_links","overflowX","FileListTableToolbar","classNames","defineProperty","highlight","title","spacer","actions","paddingRight","palette","A700","A100","FileInfoSidebar","fileNodes","handleTabChange","stringify","newValue","filelist_FileListTableToolbar","FileInfoSidebar_SingleImageView","SingleImageView","gridListRoot","itemPreview","maxHeight","flexWrap","justifyContent","overflow","GridList","cellHeight","cols","GridListTile","itemRating","itemKeywords","itemInfo","Tabs","indicatorColor","textColor","onChange","Tab","disabled","scope","align","propTypes","PropTypes","array","isRequired","paper","gridSingleItemInfo","titleBar","SlideTransition","Slide","assign","UploadDialog","isReceiverOpen","handleClose","handleOnDragEnter","handleOnDragOver","handleOnDragLeave","handleAddFile","handleFileChange","handleFolderChange","handleSelectFileBtnClick","handleSelectFolderBtnClick","handleFilterChange","_files","_fileInState","onClose","target","refs","fileInputField","folderInputField","setAttribute","_fileList","processFile","relPath_","uuid","navigator","serviceWorker","controller","postMessage","command","readDir","entry","createReader","readEntries","entries","_loop","j","fullPath","relPath","isFile","isDirectory","dataTransfer","_items","items","_path","dataTransferItem","getAsFile","webkitGetAsEntry","startDelayedFileUploads","setTimeout","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","completedFiles","completedFilesPercentage","filteredFiles","uploadDragBorderStyles","marginBottom","border","fullScreen","transition","appBar","paddingBottom","index_es","defaultMessage","Select","defaultValue","input","Input","right","autoWidth","lib","onDragEnter","onDragOver","onDragLeave","onFileDrop","minHeight","CloudUpload_default","top","left","LinearProgress","Math","min","numeric","Check_default","filesize","base","round","ref","multiple","NewFolderDialog","folderName","handleSave","TextField","raised","FilesPage","canAddFile","canAddFolder","showAddFolderDialog","showUploadDialog","showNewFolderDialog","selectedFiles","visibleRoot","handleFileSelectionChange","handleUploadClosed","handleAfterOnDelete","validatePath","messageChannel","MessageChannel","port1","onmessage","port2","pathname","obj","appShell_AppShell","fileGrid","elevation","fileGridAppBar","colorDefault","toolbarContainer","breadcrumb_Breadcrumb","CreateNewFolder_default","fileGridFileList","filelist_FileList","fileinfosidebar_FileInfoSidebar","fileGridSidebar","uploaddialog_UploadDialog","newfolderdialog_NewFolderDialog","spacing","unit","transform","mainGrid","GetUsersService","GetAllUsersService","saveUserSink_","getUsers","list","_sortedUsers","actions_UserActions","UserActions","getAllUsers","getUserService","GetUserService","getAllUsersService","App","locale","isAuthenticated","user_","messages","i18nMessages","react_router_dom","react_router","files_FilesPage","addLocaleData","en-EN","createMuiTheme","deepPurple","objectSpread","indigo","red","ReactDOM","render","MuiThemeProvider","src_App","getElementById","register","registration"],"mappings":"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","file":"static/js/main.72a5e460.chunk.js","sourcesContent":["\n/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport AppActions from '../AppActions';\nimport request from 'superagent';\n\n\n/**\n * @SEE http://docs.spring.io/spring-xd/docs/1.2.0.M1/reference/html/#processors\n * @type {{subscribe: Function, onNext: Function}}\n */\nclass LoginService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{GetUsers Service} subscribe\");\n        this.sink = sink_;\n        source_.subscribe(this.loadApps.bind(this));\n    }\n\n    /**\n     * Return all of the users\n     * @param val_\n     * @returns {*}\n     */\n    loadApps(data_)\n    {\n\n        //call server get list of apps\n        request.get('/api/v1/core/clientapps')\n            .withCredentials()\n            .set('Accept', 'application/json')\n            .end((err, res)=>{\n\n                if( !err ){\n\n                    //send results to the store\n                    this.sink.next({\n                        \"primaryApps\": res.body.apps.primary,\n                        \"secondaryApps\": res.body.apps.secondary\n                    });\n\n                }else{\n\n                    //send the error to the store (through the sink observer\n                    if( err.status === 401){\n                        AppActions.navigateTo.next(\"/\");\n                    } else if( err.status === 403) {\n                        var _error403 = {'code': err.status,'message': \"Invalid Login (todo: show toast)\"};\n                        this.sink.error(_error403);\n                    }\n                    else\n                    {\n                        console.dir(err);\n                        var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText};\n                        this.sink.error(_error);\n                    }\n\n                }\n\n            });\n\n    }\n\n}\n\n\nexport default LoginService;\n","import {BehaviorSubject} from '@reactivex/rxjs';\n\nclass AppSettings {\n\n    baseHost = new BehaviorSubject(\"http://localhost:9000\");\n    basicUser = new BehaviorSubject(window.localStorage.getItem(\"u\"));\n    basicPwd = new BehaviorSubject(window.localStorage.getItem(\"p\"));\n\n}\n\nexport default new AppSettings();\n","\n/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport AppSettings from '../../../library/actions/AppSettings';\n\nclass LogoutService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{GetUsers Service} subscribe\");\n        this.sink = sink_;\n        source_.subscribe(this.getUser.bind(this));\n    }\n\n    /**\n     * Return all of the users\n     * @param val_\n     * @returns {*}\n     */\n    getUser(username_)\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        fetch( baseUrl +'/logout', {\n            method: 'GET'\n        })\n        //check for redirect\n            .then(response => {\n                if(response.redirected) {\n                    console.log(\"redirect to: \" +response.url);\n                    window.location = response.url\n                }\n                return response;\n            })\n            .catch(err => {\n                //send the error to the store (through the sink observer\n                if( err.status === 401 || err.status === 403){\n                    window.location = \"/\";\n                } else {\n                    var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText};\n                    this.sink.error(_error);\n                }\n            });\n\n    }\n\n}\n\n\nexport default LogoutService;\n","import {Subject} from '@reactivex/rxjs';\n\nimport LoadClientAppsService from './processors/LoadClientAppsService';\nimport LogoutService from \"./processors/LogoutService\";\n\nclass AppActions {\n\n    constructor() {\n        this.loadClientAppsService = new LoadClientAppsService(this.loadClientApps.source, this.loadClientApps.sink);\n        this.logoutService = new LogoutService(this.logout.source, this.logout.sink);\n    }\n\n\n    //Use this to navigation around the app Or outside\n    navigateTo = new Subject();\n\n    logout = {'source':new Subject(), 'sink':new Subject()};\n\n    //used to call repository to get list of installed apps\n    loadClientApps = {source:new Subject(), sink: new Subject()};\n\n}\n\nexport default new AppActions();\n","import React, {Component} from 'react';\nimport {injectIntl} from 'react-intl';\nimport {withStyles} from \"@material-ui/core/styles\";\n\n//import Button from '@material-ui/core/Button';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Typography from '@material-ui/core/Typography';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\n//import PhotoIcon from '@material-ui/icons/Photo';\n\nimport AppActions from '../actions/AppActions';\n\n\nconst styleSheet = (theme) => ({\n\n    sidebarOpen:{\n        width: '240px',\n        height: '100vh',\n        background:'#fff'\n    },\n\n    sidebarClosed:{\n        width: '72px',\n        height: '100vh',\n        background:'#fff'\n    },\n\n    sidebarUserInfo:{\n        width:'100%',\n        padding:'8px',\n        display:'grid',\n        gridGap: '8px',\n        gridTemplateRows: \"auto\",\n        gridTemplateColumns: \"60px auto\"\n    },\n\n    sidebarUserInfoClosed:{\n        display:'none'\n    },\n\n    sidebarProfileIcon:{\n        gridColumn: \"1\",\n        gridRow: \"1\",\n    },\n\n    sidebarProfileName:{\n        gridColumn: \"2\",\n        gridRow: \"1\",\n        alignSelf:'center'\n    },\n\n    sidebarButtons:{\n        gridColumn: \"1/3\",\n        gridRow: \"2\",\n        justifySelf:'center'\n    },\n\n    appListsOpen:{\n        display:'grid',\n        gridGap: '0px',\n        gridTemplateRows: \"24px auto\",\n        gridTemplateColumns: \"auto\",\n        marginTop:'16px'\n    },\n\n    appListsClosed:{\n        height:'90%',\n        display:'grid',\n        gridGap: '0px',\n        gridTemplateRows: \"0px auto 72px\",\n        gridTemplateColumns: \"auto\"\n    },\n\n    openLabel:{\n        display:'inline'\n    },\n\n    closedLabel:{\n        display:'none'\n    },\n\n\n\n});\n\nclass Sidebar extends Component {\n\n\n    constructor(props, context) {\n        super(props);\n\n        this.handleNavClick = this.handleNavClick.bind(this);\n    }\n\n\n\n    handleNavClick(path){\n        if( this.props.onNavClick){\n            this.props.onNavClick(path);\n        }\n    }\n\n    handleLogout(){\n        window.localStorage.clear();\n        //UserActions.getUser.sink.next(next);\n        AppActions.logout.source.next(true);\n        AppActions.navigateTo.next(\"://\");\n    }\n\n\n    findApp(slug, apps){\n\n        if( apps ) {\n            for (let app of apps) {\n                if (app.slug === slug) {\n                    return app;\n                }\n            }\n        }\n\n        return null;\n    }\n\n\n\n    render() {\n        var classes = this.props.classes;\n        //find specific app in the installed list of apps, if it's not installed don't show link\n        var profileApp = this.findApp('usermanager', this.props.secondaryApps);\n\n        return (\n            <Paper className={this.props.open?classes.sidebarOpen:classes.sidebarClosed} >\n\n                <Paper className={this.props.open?classes.sidebarUserInfo:classes.sidebarUserInfoClosed}>\n                    <div className={classes.sidebarProfileIcon}>\n                        <AccountCircle\n                            style={{'width': 60, 'height': 60}}\n                        />\n                    </div>\n                    <div className={classes.sidebarProfileName}>\n                        <Typography component=\"div\" type={\"title\"}>{this.props.user.firstName} {this.props.user.lastName}</Typography>\n                    </div>\n                    <div className={classes.sidebarButtons}>\n\n                        <Button onClick={this.handleLogout}>Logout</Button>\n\n                        {profileApp &&\n                        <Button onClick={()=>AppActions.navigateTo.next(profileApp.path)}>Profile</Button>\n                        }\n                    </div>\n                </Paper>\n\n\n                <div className={this.props.open?classes.appListsOpen:classes.appListsClosed}>\n\n                    <div style={{gridColumn: \"1\",gridRow: \"1\"}}>\n                        <Typography type=\"title\"\n                                    className={this.props.open?classes.openLabel:classes.closedLabel}\n                                    style={{'paddingLeft':'16px', paddingTop:'16px', gridColumn: \"1\", gridRow: \"1\"}}>Apps</Typography>\n                    </div>\n\n                    <List style={{gridColumn: \"1\",gridRow: \"2\"}}>\n\n                        {this.props.apps && this.props.apps.map((item)=>{\n                            return (\n                                <ListItem button key={item.path} onClick={()=>this.handleNavClick(item.path)}>\n                                    <Avatar style={{marginRight:'8px'}}>\n                                        <FolderIcon />\n                                    </Avatar>\n                                    <ListItemText primary={item.label} secondary=\"\"\n                                                  className={this.props.open?classes.openLabel:classes.closedLabel}/>\n                                </ListItem>\n\n                            )\n                        })}\n                    </List>\n\n\n                    <List style={{gridColumn: \"1\",gridRow: \"3\"}} className={!this.props.open?classes.openLabel:classes.closedLabel}>\n                        <ListItem button onClick={()=>this.handleNavClick('://app-usermanager/index.html')}>\n                            <Avatar>\n                                <AccountCircle\n                                    style={{'width': 48, 'height': 48}}\n                                />\n                            </Avatar>\n                        </ListItem>\n                    </List>\n                </div>\n            </Paper>\n        );\n    }\n}\n\nexport default injectIntl(withStyles(styleSheet)(Sidebar));","import React, {Component} from 'react';\nimport {injectIntl} from 'react-intl';\nimport {withStyles} from \"@material-ui/core/styles\";\n\nimport AppBar from '@material-ui/core/AppBar';\n//import Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport Divider from '@material-ui/core/Divider';\nimport Typography from '@material-ui/core/Typography';\nimport Menu from '@material-ui/core/Menu';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport AppActions from '../actions/AppActions';\n\n\nconst styleSheet = (theme) => ({\n\n    root: {\n        width: '100%',\n        height: '64px'\n    },\n    headerContainer: {\n        display: \"grid\",\n        gridTemplateRows: \"auto\",\n        gridTemplateColumns: \"48px auto 48px\"\n    },\n    hamburgerMenu: {\n        display: 'block',\n        gridRow: \"1\",\n        gridColumn: \"1\",\n    },\n    mainSection: {\n        gridRow: \"1\",\n        gridColumn: \"2\"\n    },\n    rightSection: {\n        gridRow: \"2\",\n        gridColumn: \"3\",\n        textAlign: \"right\"\n    },\n    flex: {\n        flex: 1,\n    },\n    menuButton: {\n        marginLeft: -12,\n        marginRight: 20,\n        color: '#ffffff'\n    },\n    moreButton:{\n        color: '#ffffff'\n    }\n});\n\nclass AppHeader extends Component {\n\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            openMoreMenu:false\n        };\n\n        this.handleToggle = this.handleToggle.bind(this);\n        this.handleOpenMoreMenu = this.handleOpenMoreMenu.bind(this);\n        this.handleLogout = this.handleLogout.bind(this);\n    }\n\n    handleOpenMoreMenu(event){\n        this.setState({ openMoreMenu: true, openMoreMenuAnchorEl: event.currentTarget });\n    }\n\n    handleToggle(){\n        if( this.props.onToggle){\n            this.props.onToggle();\n        }\n    }\n\n    handleNavClick(path){\n\n        if( this.props.onNavClick){\n            this.props.onNavClick(path);\n        }\n    }\n\n    handleMenuClose(){\n        this.setState({\"openMoreMenu\": false});\n    }\n\n    handleLogout(){\n        window.localStorage.clear();\n        //UserActions.getUser.sink.next(next);\n        AppActions.logout.source.next(true);\n        window.location = \"/\";\n    }\n\n\n    render2() {\n        return(<div>header</div>)\n    }\n\n\n    render() {\n        var classes = this.props.classes;\n\n        return (\n            <AppBar className={classes.root} position=\"static\">\n                <Toolbar>\n                    <IconButton\n                        onClick={this.handleToggle}\n                        className={classes.menuButton}\n                        color=\"contrast\" aria-label=\"Menu\">\n                        <MenuIcon />\n                    </IconButton>\n\n                    <Typography variant=\"h5\" color=\"inherit\" className={classes.flex} onClick={()=>this.handleNavClick('://home/index.html')}>\n                        Family <i>D.A.M</i>\n                    </Typography>\n\n                    <IconButton\n                        aria-label=\"More\"\n                        aria-owns={this.state.open ? 'long-menu' : null}\n                        aria-haspopup=\"true\"\n                        onClick={this.handleOpenMoreMenu}\n                        className={classes.moreButton}\n                    >\n                        <MoreVertIcon/>\n                    </IconButton>\n\n                    <Menu\n                        id=\"long-menu\"\n                        keepMounted\n                        anchorEl={this.state.openMoreMenuAnchorEl}\n                        open={this.state.openMoreMenu}>\n                        <MenuItem onClick={()=>{this.handleLogout();this.handleMenuClose()}}>Logout</MenuItem>\n                        <Divider/>\n                        {this.props.apps && this.props.apps.map((item)=>{\n                            return (\n                                <MenuItem key={item.path}\n                                          color=\"contrast\"\n                                          onClick={()=>{this.handleNavClick(item.path);this.handleMenuClose()}}>{item.label}</MenuItem>\n                            )\n                        })}\n\n                    </Menu>\n                </Toolbar>\n\n            </AppBar>\n        );\n\n\n    }\n}\n\nexport default injectIntl(withStyles(styleSheet)(AppHeader));","import React, {Component} from 'react';\nimport {injectIntl} from 'react-intl';\nimport {withRouter} from 'react-router-dom';\nimport {withStyles} from \"@material-ui/core/styles\";\n\n\nimport Sidebar from '../sidebar/Sidebar';\nimport AppHeader from '../appheader/AppHeader';\nimport AppActions from '../actions/AppActions';\n\n\nconst styleSheet = (theme) => ({\n\n    dashboardShellContainerOpen:{\n        display: \"grid\",\n        gridTemplateRows: \"64px auto\",\n        gridTemplateColumns: \"240px auto\"\n    },\n    dashboardShellContainerClosed:{\n        display: \"grid\",\n        gridTemplateRows: \"64px auto\",\n        gridTemplateColumns: \"72px auto\"\n    },\n    header: {\n        gridColumn: \"1/3\",\n        gridRow: \"1\",\n        position: \"inherit\",\n        height: '64px'\n    },\n\n    main:{\n        background:'#eee'\n    },\n\n});\n\nclass AppShell extends Component {\n\n\n    constructor(props, context) {\n        super(props);\n\n        var isOpenCachedValue = window.localStorage.getItem(\"AppShell.isOpen\");\n\n        this.state = {\n            isMounted:true,\n            isOpen:isOpenCachedValue ?isOpenCachedValue:true\n        };\n\n        this.handleOpenCloseToggle = this.handleOpenCloseToggle.bind(this);\n        this.handleOpenMoreMenu = this.handleOpenMoreMenu.bind(this);\n    }\n\n\n    componentWillMount(){\n        this.setState({\"isMounted\":true});\n\n        AppActions.navigateTo.takeWhile(() => this.state.isMounted).subscribe(function(path){\n            //debugger;\n            if ( path !== \"://\" && path.substring(0, 3) === \"://\") {\n                window.location.href = path.substring(2);\n            }else if(this.props.history){\n                this.props.history.push(path);\n            }\n        }.bind(this));\n\n        AppActions.loadClientApps.sink.subscribe( (data)=> {\n            if( data ) {\n                this.setState({\n                    \"primaryApps\": data.primaryApps,\n                    \"secondaryApps\": data.secondaryApps\n                });\n            }\n        });\n        AppActions.loadClientApps.source.next(true);\n    }\n\n    componentWillUnmount() {\n        this.setState({\"isMounted\":false});\n    }\n\n    handleOpenMoreMenu(event){\n        this.setState({ openMoreMenu: true, openMoreMenuAnchorEl: event.currentTarget });\n    }\n\n    handleOpenCloseToggle(){\n        var val = !this.state.isOpen;\n        this.setState({'isOpen':val});\n        window.localStorage.setItem(\"AppShell.isOpen\", val);\n    }\n\n    handleLogout(){\n        window.localStorage.clear();\n        //UserActions.getUser.sink.next(next);\n        AppActions.logout.source.next(true);\n        AppActions.navigateTo.next(\"://\");\n    }\n\n\n    render() {\n        var classes = this.props.classes;\n\n        if( !this.props.user ){\n            return (<div></div>);\n        }\n\n        return (\n            <div className={this.state.isOpen?classes.dashboardShellContainerOpen:classes.dashboardShellContainerClosed}>\n                <header className={classes.header}>\n                    <AppHeader\n                        apps={this.state.secondaryApps}\n                        onToggle={this.handleOpenCloseToggle}\n                        onNavClick={(path)=>AppActions.navigateTo.next(path)}/>\n                </header>\n\n\n                <Sidebar\n                    user={this.props.user}\n                    apps={this.state.primaryApps}\n                    secondaryApps={this.state.secondaryApps}\n                    open={this.state.isOpen}\n                    onNavClick={(path)=>AppActions.navigateTo.next(path)}/>\n\n\n                <div className={classes.main}>\n                    {this.props.children}\n                </div>\n\n            </div>\n        );\n    }\n}\n\nexport default injectIntl(withRouter(withStyles(styleSheet)(AppShell)));","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport React, {Component} from 'react';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport AppActions from \"../../library/actions/AppActions\";\n\nconst styleSheet = (theme) => ({\n\n    breadcrumb:\n    {\n        backgroundColor:'transparent',\n        listStyle: 'none',\n        padding: '0px'\n    },\n\n\n    li:{\n        float:'left',\n        margin: '0 0 10px 5px',\n        color: 'blue',\n        cursor: 'pointer',\n\n        '&:before':{\n            content: '\"/ \"',\n            color: 'black'\n        },\n        '&:after':{\n            content: '\" \"',\n            color: 'black'\n        }\n    },\n\n});\n\nclass Breadcrumb extends Component {\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            paths:[]\n        };\n    }\n\n    componentDidMount() {\n        this.parsePath(this.props.path);\n    }\n\n\n    componentWillUnmount(){\n        if( this.currentPathSubscription ){\n            this.currentPathSubscription.dispose();\n        }\n    }\n\n\n    componentWillReceiveProps(nextProps){\n        if( nextProps.path ){\n            this.parsePath(nextProps.path);\n        }\n    }\n\n\n    parsePath(path_) {\n\n        var _pathParts = path_.split(\"/\");\n        var currentPath = \"\";\n\n\n        var _paths = [];\n        var _pathQueryString = [];\n        for (var i = 0; i < _pathParts.length; i++) {\n            var part = _pathParts[i];\n            if (part.trim().length > 0) {\n                currentPath = currentPath + \"/\" +part;\n                _pathQueryString[i] = part;\n\n                _paths.push({\n                    \"label\": part,\n                    \"level\": i,\n                    \"path\": currentPath,\n                    \"style\": {'color': i>2?'blue':'black', 'cursor': i>2?'pointer':'default'}\n                });\n\n            }\n\n        }\n\n\n        this.setState({\"paths\": _paths});\n    }\n\n\n\n    render() {\n        var classes = this.props.classes;\n\n        return (\n            <div >\n                <ol className={classes.breadcrumb}>\n                    {this.state.paths.map(function (path_) {\n                        if (path_.path)\n                        {\n                            return (\n                                <li className={classes.li} key={path_.path} style={path_.style} onClick={()=>AppActions.navigateTo.next(path_.path)}>\n                                    {path_.label}\n                                </li>\n                            );\n\n                        } else\n                        {\n                            return ( <li className={classes.li} key={path_.label}>{path_.label}</li> );\n                        }\n                    })}\n                </ol>\n            </div>\n        );\n    }\n\n}\n\nexport default withStyles(styleSheet)(Breadcrumb);","import React, {Component} from 'react';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport PropTypes from 'prop-types';\n\n\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport TableSortLabel from '@material-ui/core/TableSortLabel';\n\n\nconst styleSheet = theme => ({\n    tableHead:{\n        backgroundColor: '#fff',\n        fontSize:'16px'\n    }\n});\n\n\n\nclass FileListTableHead extends Component {\n\n    createSortHandler = property => event => {\n        this.props.onRequestSort(event, property);\n    };\n\n    render() {\n        const { classes, order, orderBy } = this.props;\n\n        return (\n            <TableHead className={classes.tableHead}>\n                <TableRow>\n                    <TableCell padding=\"none\" style={{width:'100%', padding:'16px 8px 16px 16px'}}>\n                        <TableSortLabel\n                            active={orderBy === \"name\"}\n                            direction={order}\n                            onClick={this.createSortHandler(\"name\")}>\n                            Name\n                        </TableSortLabel>\n                    </TableCell>\n                    <TableCell padding=\"none\" style={{minWidth:'200px', padding:'16px 8px'}}>\n                        <TableSortLabel\n                            active={orderBy === \"dam:date.created\"}\n                            direction={order}\n                            onClick={this.createSortHandler(\"dam:date.created\")}>\n                            Created\n                        </TableSortLabel>\n                    </TableCell>\n                    <TableCell padding=\"none\" style={{textAlign:'center', minWidth:'100px', padding:'16px 8px'}}>\n                        Actions\n                    </TableCell>\n                </TableRow>\n            </TableHead>\n        );\n    }\n}\n\nFileListTableHead.propTypes = {\n    numSelected: PropTypes.number.isRequired,\n    onRequestSort: PropTypes.func.isRequired,\n    order: PropTypes.string.isRequired,\n    orderBy: PropTypes.string.isRequired,\n    rowCount: PropTypes.number.isRequired,\n}\n\n\nexport default withStyles(styleSheet)(FileListTableHead);\n\n","import AppActions from '../../library/actions/AppActions';\nimport AppSettings from '../../library/actions/AppSettings';\nimport request from 'superagent';\n\nclass GetFilesAndFoldersService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{createUser Service} subscribe\");\n        this.sink = sink_;\n\n        source_.subscribe(function (path_) {\n            this.getFilesAndFolders(path_);\n        }.bind(this));\n\n\n    }\n\n    /**\n     * Return all of the files in a given directory\n     * @param val_\n     * @returns {*}\n     */\n    getFilesAndFolders(path_)\n    {\n        console.log(\"loading files & folders: \" +path_);\n\n        const baseUrl = AppSettings.baseHost.getValue();\n\n\n        if( path_ !== undefined && path_.length > 0 )\n        {\n\n            //console.log(\"{GetFiles Service} getFiles()\");\n            //\"http://localhost:9000/\"\n            var _url = baseUrl +path_;// + \".graph.1.json/nt:file,sling:file,nt:folder,sling:folder,dam:file,dam:folder/name,index,parent,links,path,jcr:primaryType,jcr:created,jcr:mixinTypes&t=1\";\n\n\n            request.get(_url)\n                .withCredentials()\n                .set('Accept', 'application/json')\n                .end((err, res) => {\n\n                    if (!err) {\n\n                        var _nodes = [];\n                        if (res.body) {\n                            _nodes = res.body.filter(f => !f.name.toString().startsWith(\".\"));\n                        }\n                        this.sink.next(_nodes);\n\n                    } else {\n                        //send the error to the store (through the sink observer\n                        if (err.status === 401) {\n                            AppActions.navigateTo.next(\"/\");\n                        } else if (err.status === 403) {\n                            AppActions.alert.next(\"You do not have permission to access these files\");\n                        } else {\n                            var _error = {\n                                'code': err.status,\n                                'status': err.statusText,\n                                'message': err.responseText\n                            };\n                            this.sink.error(_error);\n                        }\n                    }\n\n                });\n\n        }\n    }\n\n};\n\n\nexport default GetFilesAndFoldersService;\n","import request from 'superagent';\nimport AppSettings from '../../library/actions/AppSettings';\n\nclass GetFileDataService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{createUser Service} subscribe\");\n        this.sink = sink_;\n\n        source_.subscribe(function (path_) {\n            this.getFiles(path_);\n        }.bind(this));\n    }\n\n    /**\n     * Return all of the files in a given directory\n     * @param val_\n     * @returns {*}\n     */\n    getFiles(paths_)\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n\n        if( paths_ !== undefined && paths_.length > 0 )\n        {\n            var pathPromises = [];\n\n            for (var i = 0; i < paths_.length; i++) {\n                var path = paths_[i];\n\n                var promise = request.get( baseUrl +path )\n                    .withCredentials()\n                    .set('Accept', 'application/json');\n\n                pathPromises.push(promise);\n            }\n\n            Promise.all(pathPromises).then((results)=>{\n\n               var nodes = [];\n                for (var i = 0; i < results.length; i++) {\n                    var response = results[i];\n                    nodes.push(response.body);\n                }\n               this.sink.next(nodes);\n            }).catch(reason => {\n                debugger;\n                console.log(reason)\n            });\n        }\n    }\n\n};\n\n\nexport default GetFileDataService;\n","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport {Observable, Subject} from '@reactivex/rxjs';\n\nimport request from 'superagent';\nimport AppSettings from '../../library/actions/AppSettings';\nimport FileActions from './../FileActions';\nrequire('superagent-charset')(request);\n\nclass UploadFileService {\n\n    sink = undefined;\n    fileQueue = new Subject();\n    /**\n     * Setup action Listeners\n     */\n    constructor(source_, sink_) {\n\n        this.sink = sink_;\n\n        source_.subscribe((file_) => {\n            //debugger;\n            this.fileQueue.next(file_);\n            //this.uploadNextFile();\n\n            //console.log(\"done\");\n        });\n\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        this.fileQueue\n            //.take(3)\n            .flatMap(file_ => {\n                if( Array.isArray(file_) ){\n                    for (var i = 0; i < file_.length; i++) {\n                        var file = file_[i];\n                        return this.uploadNextFile(baseUrl, file);\n                    }\n                }else {\n                    return this.uploadNextFile(baseUrl, file_);\n                }\n            }, null, 3)\n            .subscribe(val_ => {\n                //debugger;\n            });\n    }\n\n\n    uploadNextFile(baseUrl, file) {\n\n        console.log(\"file: \" + file);\n\n        if (file)//!file.path)\n        {\n            //console.log(\"else clause, upload\");\n            //debugger;\n            return Observable.of(file).flatMap(req => new Promise((resolve, reject) => {\n                return this.uploadFile(baseUrl, file)\n                    .then(result=>resolve(result))\n                    .catch(err => {\n                        //debugger;\n                        let retry = 1;\n                        if( file.retry ){\n                            retry=file.retry+1;\n                        }\n                        file.progress = 0;\n                        file.retry = retry;\n                        file.error = \"Retrying request (\" +retry +\"/3)\";\n                        return reject(err);\n                    });\n            })).retry(2).catch(err => {\n                //debugger;\n                //var _error = {'code': err.status, 'message': err.message};\n                file.error = err.status +\": \" +err.message;\n                file.progress = 0;\n                return Observable.of(err);\n            });\n\n        }\n\n        return null;\n        /**\n        else\n        {\n            //console.log(\"check access\");\n            this.checkAccess(file).then(\n                function (v0) {\n                    //debugger;\n                    console.log(v0);\n                    if (v0.visible) {\n                        //console.log(\"visible, copy\");\n                        this.copyLocalFile(file).then(\n                            function (v1) {\n                                this.uploadNextFile();\n                            }.bind(this),\n                            function (e1) {\n                                this.uploadNextFile();\n                            }.bind(this));\n                    } else {\n                        //console.log(\"not visible, upload\");\n                        this.uploadFile(file).then(\n                            function (v2) {\n                                this.uploadNextFile();\n                            }.bind(this),\n                            function (e2) {\n                                this.uploadNextFile();\n                            }.bind(this));\n                    }\n                }.bind(this),\n                function (e0) {\n                    //console.log(\"error\");\n                    this.uploadNextFile();\n                }.bind(this));\n        }\n         **/\n    }\n\n\n\n    /**\n     * The server can't access the file locally, or we are in a browser.\n     * So this method will do a regular AJAX file upload\n     * @param dir\n     * @param path\n     */\n    uploadFile(baseUrl, file_) {\n\n        var filePathName = file_.uploadPath;\n        if( file_.webkitRelativePath ){\n            filePathName += \"/\" +file_.webkitRelativePath.substr(0, file_.webkitRelativePath.lastIndexOf(\"/\"));\n        }else if( file_.relativePath ){\n            filePathName += file_.relativePath.substr(0, file_.relativePath.lastIndexOf(\"/\"));\n        }\n\n\n        var formData = new FormData();\n        formData.append(\"name\", file_.name);\n        formData.append(\"path\", filePathName);\n        formData.append(\"destination\", filePathName);\n        formData.append(\"file\", file_);\n        formData.append(\"type\", file_.type);\n        formData.append(\"size\", file_.size);\n        formData.append(\"jcr:primaryType\", \"nt:file\");\n        formData.append(\"dam:date.created\", file_.lastModified);\n        formData.append(\"dam:date.modified\", file_.lastModified);\n\n\n\n        console.log(\"Upload to:\" +baseUrl +filePathName );\n        console.dir(file_);\n\n        return request\n            .post(baseUrl +filePathName)\n            .withCredentials()\n            .charset('UTF-8')\n            .send(formData)\n            .parse(({ text }) => {\n                if( text.length === 0 ) return {};\n                return JSON.parse(text)\n            })\n            .on('progress', event => {\n                console.log(event);\n                file_.progress = event.percent;\n                FileActions.uploadProgress.next(file_);\n                //the event is:\n                //{direction: \"upload\" or \"download\"\n                //  percent: 0 to 100 // may be missing if file size is unknown\n                //  total: // total file size, may be missing\n                //  loaded: // bytes downloaded or uploaded so far}\n            });\n\n\n\n        /**\n         .set(\"Content-Type\", \"application/octet-stream\")\n         .end(function(err, res){\n                if( !err ){\n                    UploadActions.uploadCompleted.onNext(data_);\n                }else {\n                    if (err.timeout) {\n                        // timed out!\n                    }\n\n                    // handle the error\n                    UploadActions.uploadError.onNext(file_);\n                    //send the error to the store (through the sink observer\n                    if (xhr_.status == 401)\n                    {\n                        AuthActions.loginRedirect.onNext(true);\n                    }\n                    if (xhr_.status == 403)\n                    {\n                        UserActions.alert.onNext(\"You do not have permission to upload to this folder\");\n                    } else\n                    {\n                        var _error = {'code': xhr_.status, 'status': xhr_.statusText, 'message': xhr_.responseText};\n                        _this.sink.onError(_error);\n                    }\n                }\n            });\n         **/\n\n\n    }\n\n\n\n\n    /**\n     * Check to see if the file is accessible to the embedded server, so we can do a quick copy. Instead of upload.\n     * @param dir - passthrough for the next step in the sequence\n     * @param path\n     * @returns {HttpPromise}\n\n    checkAccess(file_){\n\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        return request\n            .get(baseUrl +'/api/familydam/v1/files/upload/info')\n            .withCredentials()\n            .send({path: encodeURI(file_.path).replace(\"&\", \"%26\")})\n            .then(data => {\n                //debugger;\n                return JSON.parse(data);\n            }, error => {\n                if (error.status === 401) {\n                    AppActions.navigateTo.next('://login');\n                } else {\n                    var _error = {'code': error.status, 'message': error.message};\n                    //file_.error = _error;\n                    FileActions.uploadError.next(_error);\n                }\n            });\n    }*/\n\n\n    /**\n     * Tell the embedded server to copy a local file, by path.\n     * @param dir\n     * @param path\n\n    copyLocalFile(baseUrl, file_) {\n\n        if (!file_.recursive) {\n            file_.recursive = true;\n        }\n\n        return request\n            .post(baseUrl +'/api/familydam/v1/files/upload/copy')\n            .withCredentials()\n            .field(\"dir\", file_.uploadPath)\n            .field(\"path\", file_.path)\n            .field(\"recursive\", file_.recursive)\n            .then(data_ => {\n                //debugger;\n                file_.status = \"COMPLETE\";\n                file_.percentComplete = \"100\";\n                FileActions.uploadCompleted.next(data_);\n                return JSON.parse(data_);\n            });\n\n    }*/\n\n\n\n}\n\n\nexport default UploadFileService;\n","import AppActions from '../../library/actions/AppActions';\nimport AppSettings from '../../library/actions/AppSettings';\nimport request from 'superagent';\n\nclass DeleteFileOrFolderService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{createUser Service} subscribe\");\n        this.sink = sink_;\n\n        source_.subscribe(function (path_) {\n            this.deleteFileOrFolder(path_);\n        }.bind(this));\n    }\n\n    /**\n     * Return all of the files in a given directory\n     * @param val_\n     * @returns {*}\n     */\n    deleteFileOrFolder(path_)\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        if( path_ !== undefined && path_.length > 0 )\n        {\n            var _url =  baseUrl +path_ ;\n\n            request.delete(_url)\n                .withCredentials()\n                .set('Accept', 'application/json')\n                .end((err, res)=>{\n\n                    if( !err ){\n\n                        this.sink.next(true);\n\n                    }else{\n                        //send the error to the store (through the sink observer\n                        if (err.status === 401) {\n                            AppActions.navigateTo.next(\"/\");\n                        } else if (err.status === 403) {\n                            AppActions.alert.next(\"You do not have permission to access these files\");\n                        } else {\n                            var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText};\n                            this.sink.error(_error);\n                        }\n                    }\n\n                });\n\n        }\n    }\n\n};\n\n\nexport default DeleteFileOrFolderService;\n","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport AppActions from \"../../library/actions/AppActions\";\nimport AppSettings from '../../library/actions/AppSettings';\n\n/**\n * @SEE http://docs.spring.io/spring-xd/docs/1.2.0.M1/reference/html/#processors\n * @type {{subscribe: Function, onNext: Function}}\n */\nclass CreateFolderService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{GetUsers Service} subscribe\");\n        this.sink = sink_;\n        source_.subscribe(this.createDirectory.bind(this));\n    }\n\n    /**\n     * Return all of the files in a given directory\n     * @param val_\n     * @returns {*}\n     */\n    createDirectory(data_)\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        var _name = data_.name ;\n        var _url = baseUrl +data_.path +\"/\" +_name;\n\n        var formData = new FormData();\n        formData.append(\"name\", data_.username);\n        formData.append(\"jcr:primaryType\", \"nt:folder\");\n\n        fetch(_url, {\n            method: \"POST\",\n            body: formData\n        })\n            .then(response => {\n                console.info(\"CreateFolder success handler\");\n                if(response.redirected) {\n                    console.debug(\"redirect to: \" +response.url);\n                    window.location = response.url\n                }\n                //continue on\n                this.sink.next(true);\n            })\n            .then((response) => response.json())\n            .then(json => {\n                if (!json.firstName) {\n                    json.firstName = json.username;\n                }\n                this.sink.next(json);\n            })\n            .catch(err => {\n                console.warn(err);\n                //send the error to the store (through the sink observer\n                if (err.status === 401) {\n                    AppActions.navigateTo.next(\"/\");\n                }\n                else if (err.status === 403) {\n                    AppActions.alert.next(\"You do not have permission to add a new user\");\n                } else {\n                    console.error(err);\n                    var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText};\n                    this.sink.error(_error);\n                }\n            });\n\n\n        /**\n        return $.ajax({\n                    method: \"post\",\n                    url: _dir,\n                    data: {':name':_name, 'jcr:mixins':'dam:folder'},\n                    'xhrFields': {\n                        withCredentials: true\n                    }\n                }).then(function(data_, status_, xhr_){\n                    _this.sink.onNext(data_);\n                    // refresh the overall directories list\n                    DirectoryActions.refreshDirectories.onNext(true);\n                    FileActions.refreshFiles.onNext(true);\n\n                    // update token\n                    var _token = xhr_.getResponseHeader(\"X-Auth-Token\");\n                    if( _token != null && _token !== undefined ){\n                        AuthActions.saveToken.onNext(_token);\n                    }\n\n                }, function (xhr_, status_, errorThrown_){\n\n                    //send the error to the store (through the sink observer\n                    if( xhr_.status == 401){\n                        AuthActions.loginRedirect.onNext(true);\n                    }else\n                    {\n                        UserActions.alert.onNext(\"Error creating folder, you might now have permission\");\n                        //var _error = {'code':xhr_.status, 'status':xhr_.statusText, 'message': xhr_.responseText};\n                        //_this.sink.onError(_error);\n                    }\n                });\n         **/\n\n\n    }\n\n}\n\n\nexport default CreateFolderService;\n","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport {Subject} from '@reactivex/rxjs';\n\nimport GetFilesAndFoldersService from './processors/GetFileAndFoldersService';\nimport GetFileDataService from \"./processors/GetFileDataService\";\nimport UploadFileService from \"./processors/UploadFileService\";\nimport DeleteFileOrFolderService from \"./processors/DeleteFileOrFolderService\";\nimport CreateFolderService from \"./processors/CreateFolderService\";\n\nclass FileActions {\n\n\n    constructor() {\n        this.getFilesAndFoldersService = new GetFilesAndFoldersService(this.getFileAndFolders.source, this.getFileAndFolders.sink);\n        this.getFileDataService = new GetFileDataService(this.getFileData.source, this.getFileData.sink);\n        this.uploadFileService = new UploadFileService(this.uploadFile.source, this.uploadFile.sink);\n        this.deleteFileOrFolderService = new DeleteFileOrFolderService(this.deleteFileOrFolder.source, this.deleteFileOrFolder.sink);\n        this.createFolderService = new CreateFolderService(this.createFolder.source, this.createFolder.sink);\n    }\n\n    /**\n     * Call the server to load the file list\n     */\n    getFileAndFolders = {source:new Subject(), sink:new Subject()};\n\n    /**\n     * Get the file nodes for all files, using an array of paths\n     */\n    getFileData = {source:new Subject(), sink:new Subject()};\n\n    /**\n     * Upload a files\n     */\n    uploadFile = {source:new Subject(), sink:new Subject()};\n\n    /**\n     * Delete a File\n     */\n    deleteFileOrFolder = {source:new Subject(), sink:new Subject()};\n\n\n    /**\n     * Create a Folder\n     */\n    createFolder = {source:new Subject(), sink:new Subject()};\n\n\n    /**\n     * local event called when upload is complete\n     */\n    uploadProgress = new Subject();\n    uploadCompleted = new Subject();\n    uploadError = new Subject();\n\n};\n\n\n\nexport default new FileActions();\n\n","import React, {Component} from 'react';\nimport {injectIntl} from 'react-intl';\nimport {withStyles} from \"@material-ui/core/styles\";\n\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Button from \"@material-ui/core/Button\";\n\n\nconst styleSheet = (theme) => ({\n    btn: {\n        padding: '4px 12px'\n    },\n    progress: {\n        marginRight: `8px`\n    }\n});\n\nclass LoadingButton extends Component {\n\n    constructor(props, context) {\n\n        if( !props.style ){\n            props.style = {};\n        }\n\n        super(props);\n        this.handleClick = this.handleClick.bind(this);\n    }\n\n    handleClick(e){\n        console.log(\"loading button click\");\n        if( this.props.onClick ){\n            this.props.onClick(e);\n        }else{\n            console.dir(this.props);\n        }\n    }\n\n    render() {\n        var classes = this.props.classes;\n\n        return (\n            <Button\n                color=\"primary\"\n                variant=\"contained\"\n                className={classes.btn}\n                style={this.props.style}\n                onClick={this.handleClick}>\n                {this.props.isLoading &&\n                    <CircularProgress className={classes.progress} color=\"#fff\" size={25}/>\n                }\n                {this.props.label}\n            </Button>\n\n        );\n    }\n}\n\nexport default injectIntl(withStyles(styleSheet)(LoadingButton));","import React, {Component} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport PropTypes from 'prop-types';\nimport moment from 'moment';\n\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport DownloadIcon from '@material-ui/icons/CloudDownload';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport FileListTableHead from './FileListTableHead';\nimport AppActions from '../../library/actions/AppActions';\nimport fileActions from '../../actions/FileActions';\nimport LoadingButton from '../../library/loadingButton/LoadingButton';\n//import VirtualizedTable from \"../virtualizedTable/VirtualizedTable\";\n\nconst styleSheet = (theme) => ({\n    main:{\n        width:'100%',\n        height:'100%',\n        backgroundColor: '#fff'\n    },\n    root: {\n        gridRow: '1/4',\n        gridColumn: '1/4'\n    },\n    tableWrapper: {\n        overflowX: 'auto',\n    },\n});\n\n\nclass FileList extends Component{\n\n    isCntlPressed = false;\n    isSpacePressed = false;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            files:[],\n            rootPath:'/content',\n            isMounted:true,\n            order: 'asc',\n            orderBy: 'name',\n            selected: [],\n            showDeleteFileDialog:false,\n            showDeleteFolderDialog:false\n        };\n\n        this.handleFileDelete = this.handleFileDelete.bind(this);\n        this.handleFolderDelete = this.handleFolderDelete.bind(this);\n        this.handleFileDownload = this.handleFileDownload.bind(this);\n        this.handleFolderDownload = this.handleFolderDownload.bind(this);\n        this.handleCancelDialog = this.handleCancelDialog.bind(this);\n        this.handleFileDeleteOk = this.handleFileDeleteOk.bind(this);\n        this.handleFolderDeleteOk = this.handleFolderDeleteOk.bind(this);\n\n    }\n\n\n    componentDidMount(){\n        this.setState({isMounted:true});\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n        this.handleKeyUp = this.handleKeyUp.bind(this);\n        this.handleClick = this.handleClick.bind(this);\n        document.addEventListener(\"keydown\", this.handleKeyDown, false);\n        document.addEventListener(\"keyup\", this.handleKeyUp, false);\n        document.addEventListener(\"contextmenu\", function(e){\n            e.preventDefault();\n        }, false);\n\n        //used by storybook\n        if( this.props.files){\n            this.setState({'files': this.props.files});\n        }\n\n\n\n        fileActions.getFileAndFolders.sink.takeWhile(() => this.state.isMounted).subscribe((data_)=>{\n\n            var sortBy = this.state.orderBy;\n            var sortedFiles = data_.sort((a, b) => {\n\n                if( a['jcr:primaryType'] && b['jcr:primaryType'] ){\n                    if( a['jcr:primaryType'] !== b['jcr:primaryType'] ){\n                        //folders before files\n                        return a['jcr:primaryType'] > b['jcr:primaryType']?-1:1\n                    }\n                }\n                if( a[sortBy] && b[sortBy]) {\n                    return (a[sortBy].toString().toLowerCase() < b[sortBy].toString().toLowerCase() ? -1 : 1);\n                }else{\n                    return 0;\n                }\n\n            });\n\n            //console.log(JSON.stringify(sortedFiles));\n            this.setState({'files': sortedFiles});\n        });\n\n\n        //trigger file load\n        fileActions.getFileAndFolders.source.next(this.props.path);\n    }\n\n    componentWillUnmount(){\n        this.setState({isMounted:false});\n    }\n\n    componentWillReceiveProps(newProps){\n        this.props = newProps;\n        fileActions.getFileAndFolders.source.next(this.props.path);\n    }\n\n\n    handleKeyDown(e){\n        //console.log(\"keydown=\" +e.keyCode);\n        switch (e.keyCode) {\n            case 17:\n                this.isCntlPressed = true;\n                break;\n            case 91:\n                this.isCntlPressed = true;\n                break;\n            case 16: //space\n                this.isSpacePressed = true;\n                break;\n            case 32: //space\n                //todo: open preview\n                break;\n            default:\n                break;\n        }\n    }\n\n    handleKeyUp(e){\n        //console.log(\"keyup=\" +e.keyCode);\n        switch (e.keyCode) {\n            case 17:\n                this.isCntlPressed = false;\n                break;\n            case 91:\n                this.isCntlPressed = false;\n                break;\n            case 16: //space\n                this.isSpacePressed = false;\n                break;\n            default:\n                break;\n        }\n    }\n\n\n    handleClick = (event, id) => {\n        //console.log(\"handle click | id=\" +id +\" | \" +this.isCntlPressed);\n        const { selected } = this.state;\n        const selectedIndex = selected.indexOf(id);\n        let newSelected = [];\n        if( this.isCntlPressed ){\n            //newSelected = selected\n        }\n\n        //console.log('selected =' +selectedIndex);\n        if( selectedIndex === -1 ) {\n            newSelected.push(id);\n        }else{\n            newSelected = [];\n            newSelected = newSelected.concat(\n                selected.slice(0, selectedIndex),\n                selected.slice(selectedIndex + 1),\n            );\n        }\n        //console.dir(selected);\n\n        this.setState({ selected: newSelected });\n\n        if( this.props.onSelectionChange ){\n            this.props.onSelectionChange(newSelected);\n        }\n    };\n\n\n\n    handleRequestSort = (event, property) => {\n        const orderBy = property;\n        let order = 'desc';\n\n        if (this.state.orderBy === property && this.state.order === 'desc') {\n            order = 'asc';\n        }\n\n        const data =\n            order === 'desc'\n                ? this.state.files.sort((a, b) => (b[orderBy] < a[orderBy] ? -1 : 1))\n                : this.state.files.sort((a, b) => (a[orderBy] < b[orderBy] ? -1 : 1));\n\n        this.setState({ data, order, orderBy });\n    };\n\n\n\n    handleFileDelete(path_){\n        this.setState({showDeleteFileDialog:true, pendingFileToDelete: path_});\n        return false;\n    }\n\n    handleFolderDelete(path_){\n        this.setState({showDeleteFolderDialog:true, pendingFolderToDelete: path_});\n        return false;\n    }\n\n    handleFileDownload(name_, path_){\n        var link=document.createElement('a');\n        document.body.appendChild(link);\n        link.href=\"http://localhost:9000\" +path_ ;\n        link.download=name_;\n        link.click();\n\n        return false;\n    }\n\n    handleFolderDownload(path_){\n        return false;\n    }\n\n    handleFileDeleteOk(){\n        fileActions.deleteFileOrFolder.source.next(this.state.pendingFileToDelete);\n\n        var _fileToDelete = this.state.pendingFileToDelete;\n        fileActions.deleteFileOrFolder.sink.subscribe(()=>{\n            if( this.props.onDelete){\n                this.props.onDelete(_fileToDelete);\n            }\n        });\n\n        this.setState({showDeleteFileDialog:false, pendingFileToDelete:null});\n    }\n\n    handleFolderDeleteOk(path_){\n        fileActions.deleteFileOrFolder.source.next(this.state.pendingFolderToDelete);\n\n        fileActions.deleteFileOrFolder.sink.subscribe(()=>{\n            if( this.props.onDelete){\n                this.props.onDelete(this.state.pendingFolderToDelete);\n            }\n        });\n\n        this.setState({showDeleteFolderDialog:false, pendingFolderToDelete:null});\n    }\n\n    handleCancelDialog(path_){\n        this.setState({showDeleteFileDialog:false, showDeleteFolderDialog:false, pendingFileToDelete:null});\n    }\n\n\n\n    render() {\n        const classes = this.props.classes;\n        const { files, order, orderBy, selected } = this.state;\n        let checkIsSelected = path => this.state.selected.indexOf(path) !== -1;\n\n        return (\n            <Paper className={classes.root}>\n                <div className={classes.tableWrapper}>\n                    <Table>\n                        <FileListTableHead\n                            numSelected={selected.length}\n                            order={order}\n                            orderBy={orderBy}\n                            onRequestSort={this.handleRequestSort}\n                            rowCount={files.length}\n                        />\n                        <TableBody>\n                            {this.state.files.filter((f=>!f.toString().startsWith(\".\") && !f.toString().startsWith(\"jcr:\")  )).map(node => {\n\n                                const isSelected = checkIsSelected(node.path);\n\n                                if( (node['jcr:primaryType'] === \"dam:folder\" || node['jcr:primaryType'] === \"nt:folder\") ){\n\n                                    return (\n                                       <FolderRow key={node.path}\n                                                  folder={node}\n                                                  isSelected={isSelected}\n                                                  onDelete={this.handleFolderDelete}\n                                                  onDownload={this.handleFolderDownload}\n                                                  onNavigate={(path_)=>AppActions.navigateTo.next(path_)}/>\n                                    );\n\n                                }else {\n\n                                    return (\n                                        <FileRow key={node.path}\n                                                 file={node}\n                                                 isSelected={isSelected}\n                                                 onDelete={()=>this.handleFileDelete(node.path)}\n                                                 onDownload={this.handleFileDownload}\n                                                 onClick={(event, path_) => this.handleClick(event, path_)}\n                                                 onKeyDown={(event, path_) => this.handleClick(event, path_)}\n                                                 onNavigate={(path_) => AppActions.navigateTo.next(path_)}/>\n                                    )\n                                }\n                            })}\n                        </TableBody>\n\n                    </Table>\n                </div>\n\n\n                <Dialog\n                    ignoreBackdropClick\n                    maxWidth=\"sm\"\n                    open={this.state.showDeleteFileDialog}\n                    style={{'padding':'8px'}}>\n                    <DialogTitle>Delete Confirmation</DialogTitle>\n                    <DialogContent>\n                        <Typography>Are you sure you want to delete this file?</Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCancelDialog} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <LoadingButton\n                            isLoading={this.state.isLoading}\n                            label=\"Delete\"\n                            onKeyDown={(e)=>{if(e.keyCode===13) this.handleFileDeleteOk()}}\n                            onClick={this.handleFileDeleteOk}></LoadingButton>\n                    </DialogActions>\n                </Dialog>\n\n                <Dialog\n                    ignoreBackdropClick\n                    maxWidth=\"sm\"\n                    open={this.state.showDeleteFolderDialog}\n                    style={{'padding':'8px'}}>\n                    <DialogTitle>Delete Confirmation</DialogTitle>\n                    <DialogContent>\n                        <Typography>Are you sure you want to delete this folder and all of the files in it?</Typography>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCancelDialog} color=\"primary\">\n                            Cancel\n                        </Button>\n                        <LoadingButton\n                            isLoading={this.state.isLoading}\n                            label=\"Delete\"\n                            onKeyDown={(e)=>{if(e.keyCode===13) this.handleFolderDeleteOk()}}\n                            onClick={this.handleFolderDeleteOk}></LoadingButton>\n                    </DialogActions>\n                </Dialog>\n\n\n            </Paper>\n        );\n    }\n\n\n\n\n    //TODO: Work in progress\n    /**\n    renderVirtualTable() {\n\n        const columns = [\n            {width: 300, label: 'Name', dataKey: 'name'},\n            {width: 150, label: 'Created', dataKey: 'jcr:created'},\n            {width: 150, label: 'Actions', actions: ['delete', 'download']}\n\n        ];\n\n        return (\n            <Paper style={{ height: '100%', width: '100%' }}>\n                <VirtualizedTable\n                    rowCount={this.state.files.length}\n                    rowGetter={({ index }) => this.state.files[index]}\n                    columns={columns}\n                />\n            </Paper>\n        )\n    }\n     **/\n\n}\n\n\nconst FolderRow = (props, context) => (\n    <TableRow\n        hover\n        role=\"checkbox\"\n        tabIndex={-1}\n        selected={props.isSelected}\n        aria-checked={props.isSelected}>\n\n        <TableCell\n            padding=\"default\"\n            style={{padding:'8px 8px 8px 16px'}}\n            onClick={()=>props.onNavigate(props.folder.path)}>\n            <FolderIcon  />\n            <Typography component=\"span\" style={{display:'inline', paddingLeft:'16px'}}>{props.folder.name}</Typography>\n        </TableCell>\n        <TableCell padding=\"default\"></TableCell>\n        <TableCell padding=\"default\" style={{padding:'8px', textAlign:'center'}}>\n            <Button onClick={()=>props.onDelete(props.folder.path)} style={{minWidth:'24px', padding:\"4px\"}}><DeleteIcon /></Button>\n            <Button onClick={()=>window.alert('Coming Soon')} style={{minWidth:'24px', padding:\"4px\"}}><DownloadIcon /></Button>\n        </TableCell>\n    </TableRow>\n);\n\n\n\n\n\n\nconst FileRow = (props, context) => (\n    <TableRow\n        hover\n        role=\"checkbox\"\n        aria-checked={props.isSelected}\n        tabIndex={-1}\n        selected={props.isSelected}\n    >\n        <TableCell\n            padding=\"default\"\n            style={{padding:'8px 8px 8px 16px'}}\n            onClick={event => {props.onClick(event, props.file.path)}}>\n            { (props.file['path'].toString().toLowerCase().endsWith(\".jpg\") || props.file['path'].toString().toLowerCase().endsWith(\".png\") ) ?\n                <img src={\"http://localhost:9000\" +props.file.path +\"?size=100\"} alt=\"\" style={{width:'25px'}}/> : <PhotoIcon/>\n            }\n            <Typography style={{display:'inline', paddingLeft:'16px'}}>{props.file.name}</Typography>\n        </TableCell>\n        <TableCell  padding=\"default\" style={{padding:'8px'}}>{moment(props.file['dam:date.created']?props.file['dam:date.created']:props.file['jcr:created']).format('MMM Do YYYY, h:mm:ss a')}</TableCell>\n        <TableCell  padding=\"default\" style={{padding:'8px', textAlign:'center'}}>\n            <Button onClick={()=>props.onDelete(props.file.path)} style={{minWidth:'24px', padding:\"4px\"}}><DeleteIcon /></Button>\n            {props.file._links.download &&\n               <Button onClick={()=>props.onDownload(props.file.name, props.file._links.download)} style={{minWidth:'24px', padding:\"4px\"}}><DownloadIcon/></Button>\n            }\n        </TableCell>\n    </TableRow>\n);\n\n\n\n\nFileList.propTypes = {\n    classes: PropTypes.object.isRequired,\n};\n\nexport default withRouter(withStyles(styleSheet)(FileList));","import React, {Component} from 'react';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FileDownloadIcon from '@material-ui/icons/CloudDownload';\n\n\n\nconst styleSheet = theme => ({\n    root: {\n        paddingRight: 2,\n    },\n    highlight:\n        theme.palette.type === 'light'\n            ? {\n                color: theme.palette.secondary.A700,\n                backgroundColor: theme.palette.secondary.A100,\n            }\n            : {\n                color: theme.palette.secondary.A100,\n                backgroundColor: theme.palette.secondary.A700,\n            },\n    spacer: {\n        flex: '1 1 100%',\n    },\n    actions: {\n        color: theme.palette.text.secondary,\n        display:'flex'\n    },\n    title: {\n        flex: '0 0 auto',\n    },\n});\n\n\n\nclass FileListTableToolbar extends Component {\n\n    render(){\n        let {files, classes} = this.props;\n        let numSelected = files.length;\n\n\n        return (\n            <Toolbar\n                className={classNames(classes.root, {\n                    [classes.highlight]: numSelected > 0,\n                })}>\n                <div className={classes.title}>\n                    {(files.length > 1 ) && <Typography type=\"subheading\">{numSelected} selected</Typography>}\n                    {(files.length === 1) && <Typography type=\"title\">{files[0].substr(files[0].lastIndexOf('/')+1)}</Typography>}\n                </div>\n                <div className={classes.spacer}/>\n                <div className={classes.actions} style={{width:'100px', marginRight:'8px'}}>\n\n                    <IconButton aria-label=\"Delete\">\n                        <DeleteIcon/>\n                    </IconButton>\n                    <IconButton aria-label=\"Download\">\n                        <FileDownloadIcon/>\n                    </IconButton>\n\n                </div>\n            </Toolbar>\n        );\n    }\n}\n\nFileListTableToolbar.propTypes = {\n    classes: PropTypes.object.isRequired,\n    file: PropTypes.array,\n};\n\nexport default withStyles(styleSheet)(FileListTableToolbar);\n\n","import React, {Component} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {withStyles} from \"@material-ui/core/styles\";\nimport PropTypes from 'prop-types';\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Typography from \"@material-ui/core/Typography\";\nimport GridList from '@material-ui/core/GridList';\nimport GridListTile from '@material-ui/core/GridListTile';\n\n\nimport FileListTableToolbar from '../filelist/FileListTableToolbar';\n\nimport FileActions from '../../actions/FileActions';\nimport AppSettings from '../../library/actions/AppSettings';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\n\nconst styleSheet = (theme) => ({\n\n    gridListRoot: {\n        margin: '24px',\n        display:'grid',\n        gridTemplateRows:'175px 25px 50px 3fr',\n        gridTemplateColumns:'16px auto 16px',\n        background: theme.palette.background.paper,\n        justifyContent: 'center'\n},\n    itemPreview: {\n        gridRow: '1',\n        gridColumn: '2',\n        justifyContent: 'center'\n    },\n    itemRating: {\n        gridRow: '2',\n        gridColumn: '2'\n    },\n    itemKeywords: {\n        gridRow: '3',\n        gridColumn: '2'\n    },\n    itemInfo: {\n        gridRow: '4',\n        gridColumn: '2'\n    },\n    gridSingleItemInfo: {\n\n    },\n    title: {\n        color: theme.palette.primary[200],\n    },\n    titleBar: {\n        background:\n            'linear-gradient(to top, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.3) 70%, rgba(0,0,0,0) 100%)',\n    },\n\n});\n\nclass FileInfoSidebar extends Component {\n\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            fileNodes: [],\n            isMounted: true,\n            tabIndex: 0\n        };\n    }\n\n    componentWillMount() {\n        this.setState({isMounted: true});\n        this.handleTabChange = this.handleTabChange.bind(this);\n\n        if( this.props.fileNodes ){  //used by Storyboard\n            this.setState({\"fileNodes\": this.props.fileNodes});\n        }else {\n            FileActions.getFileData.sink.takeWhile(() => this.state.isMounted).subscribe((files) => {\n                console.log(JSON.stringify(files));\n                this.setState({\"fileNodes\": files});\n            });\n\n            FileActions.getFileData.source.next(this.props.files);\n        }\n    }\n\n    componentWillUnmount() {\n        this.setState({isMounted: false});\n    }\n\n    componentWillReceiveProps(newProps) {\n        this.props = newProps;\n\n        FileActions.getFileData.source.next(this.props.files);\n    }\n\n    handleTabChange(event, newValue){\n        this.setState({'tabIndex':newValue});\n    }\n\n    render() {\n        var classes = this.props.classes;\n\n        return (\n            <Paper style={this.props.style}>\n                <FileListTableToolbar\n                    files={this.props.files}/>\n\n                {(this.props.files.length===1) &&\n                    <SingleImageView\n                        handleTabChange={this.handleTabChange}\n                        tabIndex={this.state.tabIndex}\n                        fileNodes={this.state.fileNodes}\n                        classes={classes}/>\n                }\n\n            </Paper>\n        )\n    }\n}\n\n\n\nconst SingleImageView = (props, context) => (\n\n        <div className={props.classes.gridListRoot}>\n\n            <div className={props.classes.itemPreview} >\n                {props.fileNodes.length === 1 &&\n                    <div style={{height: '100%', maxWidth: '100%', textAlign: 'center'}}>\n                        {props.fileNodes.map(file => (\n                            <img src={AppSettings.baseHost.getValue() + (file['path'])}\n                                 alt={file['path']}\n                                 style={{maxHeight: '100%', maxWidth: '100%', alignSelf: 'center'}}/>\n\n                        ))}\n                    </div>\n                }\n\n                {props.fileNodes.length > 1 &&\n                    <div style={{display: 'flex', flexWrap: 'wrap', justifyContent: 'space-around', overflow: 'hidden'}}>\n                        <GridList cellHeight={160} style={{width: '100%', height: '100%'}} cols={3}>\n                            {props.fileNodes.map(file => (\n                                <GridListTile key={file['path']} cols={file.cols || 1}>\n                                    <img src={AppSettings.baseHost.getValue() + file['path']}\n                                         alt={file['jcr:path']}\n                                         style={{height: '100%', maxWidth: '100%', alignSelf: 'center'}}/>\n                                </GridListTile>\n                            ))}\n                        </GridList>\n                    </div>\n                }\n            </div>\n\n            {props.fileNodes.length === 1 &&\n                <div className={props.classes.itemRating}>\n                    <Typography>TODO: ADD RATING</Typography>\n                </div>\n            }\n\n\n            {props.fileNodes.length === 1 &&\n                <div className={props.classes.itemKeywords}>\n                    <Typography>TODO: ADD Keywords</Typography>\n                </div>\n            }\n\n            {props.fileNodes.length === 1 &&\n                <div className={props.classes.itemInfo}>\n                    <Tabs value=\"Details\" indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" onChange={props.handleTabChange}>\n                        <Tab label=\"Details\" />\n                        <Tab label=\"Versions\" disabled />\n                    </Tabs>\n\n                    {props.tabIndex === 0 &&\n                    <div>\n                        <Table>\n                            <TableBody>\n                                <TableRow style={{padding:'8px'}}>\n                                    <TableCell component=\"th\" scope=\"row\" align=\"right\" style={{padding:'8px'}}>Type</TableCell>\n                                    <TableCell align=\"left\">{props.fileNodes[0]['jcr:content']['jcr:mimeType']}</TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell component=\"th\" scope=\"row\" align=\"right\" style={{padding:'8px'}}>Resolution</TableCell>\n                                    <TableCell align=\"left\">{props.fileNodes[0]['width']} x {props.fileNodes[0]['height']}</TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell component=\"th\" scope=\"row\" align=\"right\" style={{padding:'8px'}}>Created</TableCell>\n                                    <TableCell align=\"left\">{props.fileNodes[0]['dam:date.created']}</TableCell>\n                                </TableRow>\n                                <TableRow>\n                                    <TableCell component=\"th\" scope=\"row\" align=\"right\" style={{padding:'8px'}}>Modified</TableCell>\n                                    <TableCell align=\"left\">{props.fileNodes[0]['jcr:lastModified']}</TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                    </div>\n                    }\n                    {props.tabIndex === 1 && <div>Versions Panel</div>}\n                </div>\n            }\n\n        </div>\n\n);\n\n\n\nFileList.propTypes = {\n    files: PropTypes.array.isRequired,\n};\n\nexport default withRouter(withStyles(styleSheet)(FileInfoSidebar));","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport React, {Component} from 'react';\nimport {withStyles} from \"@material-ui/core/styles\";\n//import AppActions from \"../../actions/AppActions\";\nimport {FormattedMessage} from 'react-intl'; //, FormattedPlural, FormattedDate\nimport filesize from 'filesize';\nimport uuid from 'uuid';\n\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport Input from '@material-ui/core/Input';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\n//import Typography from '@material-ui/core/Typography';\nimport Slide from '@material-ui/core/Slide';\n\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableHead from '@material-ui/core/TableHead';\nimport TableRow from '@material-ui/core/TableRow';\nimport Dialog from '@material-ui/core/Dialog';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport CheckIcon from '@material-ui/icons/Check';\nimport FileUploadIcon from '@material-ui/icons/CloudUpload';\n\nimport {Receiver} from 'react-file-uploader';\nimport FileActions from '../../actions/FileActions';\n\n\n\nconst styleSheet = (theme) => ({\n    appBar: {\n        position: 'relative',\n    },\n    flex: {\n        flex: 1,\n    },\n});\n\n\nfunction SlideTransition(props) {\n    return <Slide direction=\"up\" {...props} />;\n}\n\n\nclass UploadDialog extends Component {\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            isMounted: true,\n            isReceiverOpen: false,\n            files: [],\n            filter: 'all'\n        };\n\n        this.handleClose = this.handleClose.bind(this);\n        this.handleOnDragEnter = this.handleOnDragEnter.bind(this);\n        this.handleOnDragOver = this.handleOnDragOver.bind(this);\n        this.handleOnDragLeave = this.handleOnDragLeave.bind(this);\n        this.handleAddFile = this.handleAddFile.bind(this);\n        this.handleFileChange = this.handleFileChange.bind(this);\n        this.handleFolderChange = this.handleFolderChange.bind(this);\n        this.handleSelectFileBtnClick = this.handleSelectFileBtnClick.bind(this);\n        this.handleSelectFolderBtnClick = this.handleSelectFolderBtnClick.bind(this);\n        this.handleFilterChange = this.handleFilterChange.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({isMounted: true, files: []});\n\n\n        //.takeWhile(() => this.state.isMounted)\n        FileActions.uploadFile.sink.subscribe((file_) => {\n            let _files = [];\n            for (var i = 0; i < this.state.files.length; i++) {\n                var _fileInState = this.state.files[i];\n                if (file_.id === _fileInState.id) {\n                    _fileInState.progress = 100;\n                }\n                _files.push(_fileInState);\n            }\n            this.setState({files: _files});\n        });\n\n\n        FileActions.uploadProgress.subscribe(file_ => {\n            let _files = [];\n            for (var i = 0; i < this.state.files.length; i++) {\n                var _fileInState = this.state.files[i];\n                if (file_.id === _fileInState.id && file_.progress !== 100) {\n                    _fileInState.progress = file_.progress;\n                }\n                _files.push(_fileInState);\n            }\n            this.setState({files: _files});\n        });\n\n\n        FileActions.uploadError.subscribe((file_) => {\n            let _files = [];\n            for (var i = 0; i < this.state.files.length; i++) {\n                var _fileInState = this.state.files[i];\n                if (file_.id === _fileInState.id) {\n                    _fileInState.error = file_.error;\n                }\n                _files.push(_fileInState);\n            }\n            this.setState({files: _files});\n        });\n\n\n    }\n\n\n    componentWillUnmount() {\n        this.setState({isMounted: false});\n    }\n\n    handleClose() {\n        this.setState({files: [], filter: \"all\"});\n\n        if (this.props.onClose) {\n            this.props.onClose();\n        }\n    }\n\n    handleOnDragEnter(e) {\n        //console.log(\"onDragEnter\");\n        this.setState({isReceiverOpen: true});\n    }\n\n    handleOnDragOver(e) {\n        // your codes here\n        if( this.state.isReceiverOpen ) {\n            this.setState({isReceiverOpen: true});\n        }\n    }\n\n    handleOnDragLeave(e) {\n        this.setState({isReceiverOpen: false});\n    }\n\n    handleFilterChange(event) {\n        //debugger;\n        this.setState({filter: event.target.value});\n    }\n\n\n    handleSelectFileBtnClick(event) {\n        //debugger;\n        this.refs.fileInputField.click();\n    }\n\n    handleSelectFolderBtnClick(event) {\n        this.refs.folderInputField.setAttribute(\"directory\", \"directory\");\n        this.refs.folderInputField.setAttribute(\"webkitdirectory\", \"webkitdirectory\");\n        this.refs.folderInputField.click();\n    }\n\n\n    handleFileChange(event, files) {\n        var _files = event.currentTarget.files;\n        this.handleAddFile(event, _files);\n    }\n\n    handleFolderChange(event) {\n        var _files = event.currentTarget.files;\n        this.handleAddFile(event, _files);\n    }\n\n\n    handleAddFile(e, files) {\n        var _fileList = this.state.files;\n        // close the Receiver after file dropped\n\n        var processFile = function(file_, path_, relPath_){\n            //_fileList.push(file_);\n            if (!file_.id) {\n                file_.id = uuid();\n            }\n            file_.progress = 0;\n            file_.uploadPath = path_;\n            if( relPath_ ){\n                file_.relativePath = relPath_;\n            }\n            //FileActions.uploadFile.source.next(file_);\n\n            if(navigator.serviceWorker.controller) {\n                navigator.serviceWorker.controller.postMessage(\n                    {\n                        command: 'upload-file',\n                        file: file_,\n                        message: {id: file_.id, progress: file_.progress, uploadPath: file_.uploadPath, relativePath: file_.relativePath}\n                    });\n            }else{\n                console.log(\"[app] Controller is NULL\");\n            }\n        };\n\n\n        var readDir = function (entry, file, path) {\n            // Get folder contents\n            //var file = dataTransferItem.getAsFile();\n            var dirReader = entry.createReader();\n            dirReader.readEntries(function (entries) {\n\n                for (let j = 0; j < entries.length; j++) {\n                    var entry = entries[j];\n                    console.dir(entry);\n                    console.dir(entry.file);\n                    console.dir(entry.fullPath);\n                    const relPath = entry.fullPath;\n                    if (entry.isFile) {\n                        entry.file((f) => {\n                            processFile(f, path, relPath);\n                        });\n                    } else if (entry.isDirectory) {\n                        readDir(entry, file, path);\n                    }\n                }\n\n            });\n        };\n\n\n\n\n        if( e.dataTransfer ) {\n            var _items = e.dataTransfer.items;\n            for (var i = 0; i < _items.length; i++) {\n                const _path = this.props.path;\n                var dataTransferItem = _items[i];\n                var file = dataTransferItem.getAsFile();\n                var entry = dataTransferItem.webkitGetAsEntry();\n\n                if (entry.isFile) {\n                    processFile(file, _path)\n                } else if (entry.isDirectory) {\n                    readDir(entry, file, _path);\n                }\n            }\n        } else if( files ){\n            const _path = this.props.path;\n            for (const file of files) {\n                processFile(file, _path);\n            }\n        }\n\n        console.log(_fileList.length +\" Files are loaded\");\n        this.setState({isReceiverOpen: false, files: _fileList});\n\n        this.startDelayedFileUploads(_fileList)\n    }\n\n    startDelayedFileUploads(files) {\n        setTimeout(function(){\n            for (const file of files) {\n                FileActions.uploadFile.source.next(file);\n            }\n        }, 1000);\n    }\n\n    render() {\n        var classes = this.props.classes;\n\n        var completedFiles = this.state.files.filter(file_ => file_.progress === 100).length;\n        var completedFilesPercentage = 100 * (completedFiles / this.state.files.length);\n\n\n        var filteredFiles =\n            this.state.files.filter(file_ => {\n                if (this.state.filter === \"completed\") {\n                    return file_.progress === 100;\n                } else if (this.state.filter === \"uploading\") {\n                    return file_.progress > 0 && file_.progress < 100;\n                } else if (this.state.filter === \"waiting\") {\n                    return file_.progress === 0;\n                } else {\n                    return true; //all\n                }\n            });\n\n\n\n        let uploadDragBorderStyles = {marginLeft: '24px', marginRight: '24px', marginBottom: '24px', height: '100%', 'border': '3px #ccc dashed'};\n        if( this.state.isReceiverOpen ){\n            uploadDragBorderStyles.border = '5px #ccc dashed';\n        }\n\n\n\n        return (\n            <Dialog\n                maxWidth=\"md\"\n                fullScreen={true}\n                open={this.props.open}\n                transition={SlideTransition}>\n                <AppBar className={classes.appBar}>\n                    <Toolbar>\n                        <Typography type=\"title\" color=\"inherit\" className={classes.flex}>\n                            Import Files\n                        </Typography>\n                        <Button onClick={this.handleClose} disabled={completedFiles !== this.state.files.length} style={{'color':'white'}}>\n                            close\n                        </Button>\n                    </Toolbar>\n                </AppBar>\n\n                <div style={{paddingTop: '24px', paddingBottom: '24px', width: '100%', display: 'flex'}}>\n                    <Button className=\"btn btn-default\" onClick={this.handleSelectFileBtnClick}>\n                        <FormattedMessage\n                            id=\"selectFiles\"\n                            defaultMessage=\"Select Files\"\n                        />\n                    </Button>\n                    <Button className=\"btn btn-default\" onClick={this.handleSelectFolderBtnClick}>\n                        <FormattedMessage\n                            id=\"selectFiles\"\n                            defaultMessage=\"Select Folder\"\n                        />\n                    </Button>\n\n                    <Select\n                        value={this.state.filter}\n                        onChange={this.handleFilterChange}\n                        defaultValue={\"all\"}\n                        input={<Input id=\"filterInput\"/>}\n                        style={{textAlign: 'right', right: '24px', position: 'absolute', minWidth: '100px'}}\n                        autoWidth\n                    >\n                        <MenuItem value=\"all\"><em>All</em></MenuItem>\n                        <MenuItem value=\"waiting\">Waiting</MenuItem>\n                        <MenuItem value=\"uploading\">Uploading</MenuItem>\n                        <MenuItem value=\"completed\">Completed</MenuItem>\n                    </Select>\n                </div>\n\n\n                {this.state.files.length === 0 &&\n                    <Receiver\n                        style={uploadDragBorderStyles}\n                        isOpen={true}\n                        onDragEnter={this.handleOnDragEnter}\n                        onDragOver={this.handleOnDragOver}\n                        onDragLeave={this.handleOnDragLeave}\n                        onFileDrop={this.handleAddFile}>\n\n                        {this.state.files.length === 0 &&\n                        <Table style={{minHeight: '150px', maxHeight: '70%', minWidth: '50%', margin:'24px'}}>\n                            <TableBody>\n                                <TableRow>\n                                    <TableCell style={{padding: '0 8px 0 8px', border: '0px'}}>\n                                        <div onClick={this.handleSelectFileBtnClick} style={{margin: '40px', textAlign: 'center', fontSize:'1.4rem'}}>\n                                            Click or drag files to this area to upload\n                                            <div style={{margin: '16px'}}>\n                                                <FileUploadIcon style={{fontSize:'2rem'}}/>\n                                            </div>\n                                            <p style={{fontSize:'1rem'}}>\n                                                {this.props.path}\n                                            </p>\n                                        </div>\n                                    </TableCell>\n                                </TableRow>\n                            </TableBody>\n                        </Table>\n                        }\n                    </Receiver>\n                }\n\n                {this.state.files.length > 0  &&\n                    <div style={{paddingLeft:'24px', paddingRight:'24px', position:'absolute', top:'135px', right:'24px', left:'24px'}}>\n                        <Typography style={{'display': 'inline'}}>{completedFiles} / {this.state.files.length}</Typography>\n                        <LinearProgress variant=\"determinate\" value={Math.min(completedFilesPercentage, 100)}/>\n                        <Typography>Files will be added to: <strong>{this.props.path}</strong></Typography>\n                    </div>\n                }\n\n\n                {(this.state.files.length > 0 && filteredFiles.length > 0) &&\n                    <div  style={{marginLeft: '24px', marginRight: '24px', height: '100%', top:'180px', position: 'absolute', left:'16px', right:'16px'}}>\n                    <Table>\n                        <TableHead>\n                            <TableRow>\n                                <TableCell style={{width: '32px', padding: '0 8px 0 8px'}}></TableCell>\n                                <TableCell style={{width: '100%', padding: '0 8px 0 8px'}}>Name</TableCell>\n                                <TableCell style={{width: '50px', padding: '0 8px 0 8px'}} numeric>Size</TableCell>\n                                <TableCell style={{width: '50px', padding: '0 8px 0 8px'}} numeric>Progress</TableCell>\n                            </TableRow>\n                        </TableHead>\n                        <TableBody>\n                            {filteredFiles.map(file_ => {\n                                return (\n                                    <TableRow key={file_.id}>\n                                        <TableCell style={{padding: '0 8px 0 8px'}}>\n                                            {file_.progress < 100 ?\n                                                <CircularProgress size={24}/>\n                                                :<CheckIcon color=\"primary\"/>\n                                            }\n                                        </TableCell>\n                                        <TableCell style={{padding: '0 8px 0 8px'}}>\n                                            <Typography>{file_.name}</Typography>\n                                            <Typography>{file_.webkitRelativePath}  {file_.error}</Typography>\n                                        </TableCell>\n                                        <TableCell style={{padding: '0 8px 0 8px'}} numeric>{filesize(file_.size, {base: 10})}</TableCell>\n                                        <TableCell style={{padding: '0 8px 0 8px'}} numeric>\n                                            {Math.round(file_.progress)}%\n                                        </TableCell>\n                                    </TableRow>\n                                );\n                            })}\n                        </TableBody>\n                    </Table>\n                    </div>\n                }\n\n\n\n                <input type=\"file\"\n                       ref=\"fileInputField\"\n                       multiple\n                       style={{'display': 'none'}}\n                       onChange={this.handleFileChange}/>\n                <input type=\"file\"\n                       ref=\"folderInputField\"\n                       style={{'display': 'none'}}\n                       onChange={this.handleFolderChange}/>\n\n\n            </Dialog>\n\n        );\n    }\n\n}\n\n\nexport default withStyles(styleSheet)(UploadDialog);","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport React, {Component} from 'react';\nimport {withStyles} from \"@material-ui/core/styles\";\n//import AppActions from \"../../actions/AppActions\";\n\nimport Button from '@material-ui/core/Button';\n//import Typography from '@material-ui/core/Typography';\nimport Slide from '@material-ui/core/Slide';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\nimport FileActions from '../../actions/FileActions';\n\nconst styleSheet = (theme) => ({ });\n\n\nfunction SlideTransition(props) {\n    return <Slide direction=\"up\" {...props} />;\n}\n\n\nclass NewFolderDialog extends Component {\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            folderName:\"\"\n        };\n\n        this.handleSave = this.handleSave.bind(this);\n    }\n\n    componentDidMount() {\n        this.setState({isMounted:true});\n    }\n\n\n    componentWillUnmount(){\n        this.setState({isMounted:false});\n    }\n\n\n    handleSave(){\n        //send event\n        FileActions.createFolder.source.next({name:this.state.folderName, path:this.props.path});\n\n        FileActions.createFolder.sink.subscribe( ()=> {\n            if( this.props.onClose ) this.props.onClose();\n        });\n    }\n\n\n    render() {\n        //var classes = this.props.classes;\n        return (\n            <Dialog\n                maxWidth=\"md\"\n                fullScreen={false}\n                open={this.props.open}\n                transition={SlideTransition}>\n                <DialogTitle>Create New Folder</DialogTitle>\n                <DialogContent>\n\n                    <TextField\n                        id=\"newFolderName\"\n                        label=\"Folder Name\"\n                        value={this.state.folderName}\n                        onChange={(e)=>this.setState({folderName: e.target.value})}\n                        margin=\"dense\"\n                    />\n\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={this.props.onClose} color=\"primary\">\n                        Close\n                    </Button>\n                    <Button raised color=\"primary\" onClick={this.handleSave}>\n                        Save\n                    </Button>\n                </DialogActions>\n\n\n                <input type=\"file\"\n                       ref=\"fileInputField\"\n                       multiple\n                       style={{'display': 'none'}}\n                       onChange={this.handleFileChange}/>\n                <input type=\"file\"\n                       ref=\"folderInputField\"\n                       style={{'display': 'none'}}\n                       onChange={this.handleFolderChange}/>\n\n            </Dialog>\n\n        );\n    }\n\n}\n\n\nexport default withStyles(styleSheet)(NewFolderDialog);","/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport React, {Component} from 'react';\nimport {withRouter} from 'react-router-dom';\nimport {injectIntl} from 'react-intl';\nimport {withStyles} from \"@material-ui/core/styles\";\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport FileUpload from '@material-ui/icons/Folder';//todo change back to upload icon\nimport FolderIcon from '@material-ui/icons/Folder';\nimport NewFolderIcon from '@material-ui/icons/CreateNewFolder';\n\n\nimport AppShell from '../../library/appShell/AppShell';\nimport AppActions from '../../library/actions/AppActions';\nimport Breadcrumb from '../../components/breadcrumb/Breadcrumb';\nimport FileList from '../../components/filelist/FileList';\nimport FileInfoSidebar from '../../components/fileinfosidebar/FileInfoSidebar';\nimport UploadDialog from '../../components/uploaddialog/UploadDialog';\nimport NewFolderDialog from '../../components/newfolderdialog/NewFolderDialog';\nimport fileActions from \"../../actions/FileActions\";\n\nconst styleSheet = (theme) => ({\n    progress: {\n        margin: `0 ${theme.spacing.unit * 2}px`,\n        width: '100px',\n        height: '100px',\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)'\n    },\n\n    toolbarContainer:{\n        display:'grid',\n        gridTemplateRows:'auto',\n        gridTemplateColumns:'48px auto auto'\n    },\n\n    fileGrid:{\n        height:'100%',\n        display:'grid',\n        gridTemplateRows:'64px auto',\n        gridTemplateColumns:'4fr 2fr'\n    },\n\n    fileGridAppBar:{\n        gridRow:'1',\n        gridColumn:'1/3'\n    },\n\n    fileGridFileList:{\n        gridRow:'2',\n        gridColumn:'1',\n        margin: '24px'\n    },\n\n    fileGridSidebar:{\n        gridRow:'2',\n        gridColumn:'2',\n        margin: '24px'\n    },\n\n    mainGrid:{\n        height: '100%',\n        overflow: 'scroll',\n        display:'grid',\n        gridGap:'16px',\n        gridTemplateRows:'1fr 1fr 1fr',\n        gridTemplateColumns:'2fr 6fr'\n    }\n});\n\n\nclass FilesPage extends Component {\n\n\n    constructor(props, context) {\n        super(props);\n\n        this.state = {\n            isMounted:false,\n            isLoading:false,\n            canAddFile:true,\n            canAddFolder:true,\n            showAddFolderDialog:false,\n            showUploadDialog:false,\n            showNewFolderDialog:false,\n            selectedFiles:[],\n            root:\"/content\",\n            visibleRoot:\"/content/files\",\n            path:\"/content/files\"\n        };\n\n        this.handleFileSelectionChange = this.handleFileSelectionChange.bind(this);\n        this.handleUploadClosed = this.handleUploadClosed.bind(this);\n        this.handleAfterOnDelete = this.handleAfterOnDelete.bind(this);\n    }\n\n    componentWillMount(){\n        this.setState({isMounted:true});\n        this.validatePath();\n    }\n\n    componentDidMount(){\n        AppActions.navigateTo.takeWhile(() => this.state.isMounted).subscribe((path)=>{\n            console.log(\"{FilesPage} navigateTo=\" +path);\n            if (path.substring(0, 3) === \"://\") {\n                if( window.location.href.substring( window.location.href.indexOf(\"#\")+1) !== path.substring(2) ){\n                    window.location.href = path.substring(2);\n                }\n            }else{\n                this.props.history.push(path);\n            }\n\n            //this.setState({\"selectedFiles\":[]});\n        });\n\n        //Call Service Worker to get list of outstanding Files that need to be uploaded\n        if(navigator.serviceWorker.controller) {\n            var messageChannel = new MessageChannel();\n            messageChannel.port1.onmessage = function(event) {\n                console.log(\"[app] Response the SW : \", event.data.message);\n            };\n            navigator.serviceWorker.controller.postMessage({command: 'listFiles', message: \"some data\"}, [messageChannel.port2]);\n        }else{\n            console.log(\"[app] Controller is NULL\");\n        }\n    }\n\n    componentWillUnmount(){\n        this.setState({isMounted:false});\n    }\n\n    componentWillReceiveProps(newProps){\n        this.props = newProps;\n        this.validatePath();\n\n    }\n\n\n    validatePath() {\n        let _path = this.props.path;\n        if( this.props.location.pathname && this.props.location.pathname.toString().startsWith(this.state.visibleRoot) ){\n            _path = this.props.location.pathname;\n        }\n        if( !_path ){\n            _path = this.state.visibleRoot;\n        }\n\n        if( _path.toString().startsWith(this.state.visibleRoot)) {\n            this.setState({\"path\": _path});\n        }else{\n            //todo show invalid path\n            console.log(\"Invalid Path: \" +_path);\n        }\n    }\n\n\n    handleFileSelectionChange(files){\n        this.setState({selectedFiles:files});\n    }\n\n    handleUploadClosed(){\n        this.setState({'showUploadDialog':false});\n        fileActions.getFileAndFolders.source.next(this.state.path);\n    }\n\n    handleAfterOnDelete(path_){\n\n        //console.log(\"handleAfterOnDelete: \" +this.state.path);\n\n        //remove deleted item from list of selectedfiles\n        var selectedFiles = [];\n        for (var i = 0; i < this.state.selectedFiles.length; i++) {\n            var obj = this.state.selectedFiles[i];\n            if( obj !== path_){\n                selectedFiles.push(obj);\n            }\n        }\n        this.setState({selectedFiles:selectedFiles});\n\n        fileActions.getFileAndFolders.source.next(this.state.path);\n    }\n\n\n\n    render() {\n        var classes = this.props.classes;\n\n        if( this.state.isLoading ){\n            return (\n                <AppShell user={this.props.user}>\n                    <CircularProgress className={classes.progress} size={50} />\n                </AppShell>\n            );\n        }\n\n\n\n        return (\n            <AppShell user={this.props.user}>\n                <div className={classes.fileGrid}>\n                    <AppBar color=\"default\" position=\"static\" elevation={0}\n                            className={classes.fileGridAppBar}\n                            style={{'colorDefault':'#eeeeee'}}>\n\n                        <Toolbar className={classes.toolbarContainer}>\n                            <div style={{gridRow:'1', gridColumn:'1'}}>\n                                <FolderIcon style={{width:'36px', height:'36px'}}/>\n                            </div>\n                            <div style={{gridRow:'1', gridColumn:'2'}}>\n                                <Breadcrumb root={this.state.root} path={this.state.path}/>\n                            </div>\n                            <div style={{gridRow:'1', gridColumn:'3', textAlign:'right'}}>\n                                <Button\n                                    color=\"primary\"\n                                    disabled={!this.state.canAddFile}\n                                    onClick={()=>{this.setState({'showUploadDialog':true})}}>\n                                    <FileUpload/>&nbsp;&nbsp;Add Files\n                                </Button>\n\n                                <Button\n                                    label=\"New Folder\"\n                                    color=\"primary\"\n                                    disabled={!this.state.canAddFolder}\n                                    onClick={()=>{this.setState({'showNewFolderDialog':true})}}>\n                                    <NewFolderIcon/>&nbsp;&nbsp;New Folder\n                                </Button>\n                            </div>\n                        </Toolbar>\n                    </AppBar>\n\n\n                    <div className={classes.fileGridFileList} style={{gridColumn:this.state.selectedFiles.length>0?'1/2':'1/3'}}>\n                        <FileList\n                            path={this.state.path}\n                            onSelectionChange={this.handleFileSelectionChange}\n                            onDelete={this.handleAfterOnDelete}\n                            style={{gridRow:\"1 / 4\", gridColumn:\"1 / 3\"}}/>\n                    </div>\n\n                    <FileInfoSidebar\n                        files={this.state.selectedFiles}\n                        className={classes.fileGridSidebar}\n                        style={{display:this.state.selectedFiles.length>0?'block':'none'}}\n                    />\n\n                    <UploadDialog\n                        onClose={this.handleUploadClosed}\n                        open={this.state.showUploadDialog}\n                        path={this.state.path}/>\n\n                    <NewFolderDialog\n                        onClose={()=>{this.setState({'showNewFolderDialog':false})}}\n                        open={this.state.showNewFolderDialog}\n                        path={this.state.path}/>\n                </div>\n\n            </AppShell>\n        );\n\n    }\n}\n\n\nexport default injectIntl(withRouter(withStyles(styleSheet)(FilesPage)));","\n/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport AppSettings from '../../../library/actions/AppSettings';\n\n\n/**\n * @SEE http://docs.spring.io/spring-xd/docs/1.2.0.M1/reference/html/#processors\n * @type {{subscribe: Function, onNext: Function}}\n */\nclass GetUsersService {\n\n    sink=undefined;\n\n    constructor(source_, sink_) {\n        //console.log(\"{GetUsers Service} subscribe\");\n        this.sink = sink_;\n        source_.subscribe(this.getUser.bind(this));\n    }\n\n    /**\n     * Return all of the users\n     * @param val_\n     * @returns {*}\n     */\n    getUser(username_)\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        fetch( baseUrl +'/api/v1/auth/user/me', {\n            method: 'GET'\n        })\n            //check for redirect\n            .then(response => {\n                if(response.redirected) {\n                    console.log(\"redirect to: \" +response.url);\n                    window.location = response.url\n                }\n                return response;\n            })\n            //parse json\n            .then((response) => response.json())\n            .then(json => {\n                if (!json.firstName) {\n                    json.firstName = json.username;\n                }\n                this.sink.next(json);\n            })\n            .catch(err => {\n                //send the error to the store (through the sink observer\n                if( err.status === 401 || err.status === 403){\n                    window.location = \"/\";\n                } else {\n                    var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText||err.message};\n                    this.sink.error(_error);\n                }\n            });\n\n\n\n\n    }\n\n}\n\n\nexport default GetUsersService;\n","\n/*\n * Copyright (c) 2015  Mike Nimer & 11:58 Labs\n */\nimport AppActions from '../../../library/actions/AppActions';\nimport AppSettings from '../../../library/actions/AppSettings';\nimport request from 'superagent';\n\n\n/**\n * @SEE http://docs.spring.io/spring-xd/docs/1.2.0.M1/reference/html/#processors\n * @type {{subscribe: Function, onNext: Function}}\n */\nclass GetAllUsersService {\n\n    sink=undefined;\n\n    constructor(source_, sink_, saveUserSink_) {\n        //console.log(\"{GetUsers Service} subscribe\");\n        this.sink = sink_;\n        source_.subscribe(this.getUsers.bind(this));\n\n        //refresh the list after any user data is saved\n        //saveUserSink_.subscribe(this.getUsers.bind(this));\n    }\n\n    /**\n     * Return all of the users\n     * @param val_\n     * @returns {*}\n     */\n    getUsers()\n    {\n        const baseUrl = AppSettings.baseHost.getValue();\n\n        request\n            .get(baseUrl +'/api/v1/auth/users')\n            .withCredentials()\n            .set('Accept', 'application/json')\n            .end((err, results) => {\n\n                if( !err ){\n\n                    var list = [];\n\n                    for (var i = 0; i < results.body.length; i++) {\n                        var item = results.body[i];\n\n                        if (item.firstName === undefined) {\n                            item.firstName = item.username;\n                        }\n                        list.push(item);\n                    }\n\n\n                    var _sortedUsers = list.sort(function (a, b) {\n                        if (a.username > b.username) return 1;\n                        if (a.username < b.username) return -1;\n                        return 0;\n                    });\n\n                    this.sink.next(_sortedUsers);\n\n                }else{\n                    //send the error to the store (through the sink observer\n                    if( err.status === 401){\n                        AppActions.navigateTo.next(\"/\");\n                    } else {\n                        var _error = {'code': err.status, 'status': err.statusText, 'message': err.responseText};\n                        this.sink.error(_error);\n                    }\n                }\n            });\n\n    }\n\n}\n\n\nexport default GetAllUsersService;\n","import {Subject} from '@reactivex/rxjs';\n\nimport GetUserService from './processors/GetUserService';\nimport GetAllUsersService from './processors/GetAllUsersService';\n\nclass UserActions {\n\n    constructor() {\n        this.getUserService = new GetUserService(this.getUser.source, this.getUser.sink);\n        this.getAllUsersService = new GetAllUsersService(this.getAllUsers.source, this.getAllUsers.sink);\n    }\n\n    getUser = {'source':new Subject(), 'sink':new Subject() };\n    getAllUsers = {'source':new Subject(), 'sink':new Subject(  )};\n\n}\n\nexport default new UserActions();\n","import React, {Component} from 'react';\nimport {HashRouter as Router, Route, Switch} from 'react-router-dom';\nimport {IntlProvider} from 'react-intl';\n\nimport {withStyles} from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\n//views\nimport FilesPage from './pages/files/FilesPage';\n\nimport UserActions from './library/actions/UserActions';\n//import AppSettings from './library/actions/AppSettings';\n\nconst styleSheet = (theme) => ({\n    progress: {\n        margin: `0 ${theme.spacing.unit * 2}px`,\n        width: '100px',\n        height: '100px',\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        transform: 'translate(-50%, -50%)'\n    }\n});\n\n\nclass App extends Component {\n    constructor(props, context) {\n        super(props, context);\n\n\n        this.state = {\n            \"context\": context,\n            \"locale\": \"en-EN\",\n            \"isAuthenticated\": false,\n            \"isLoading\": true,\n            \"isMounted\": false\n        };\n\n        // set it running locally with npm start, so you can still call running server\n        if( window.location.href.indexOf(\":3000\") > -1){\n            //AppSettings.baseHost.next(\"http://localhost:9000\");\n            //AppSettings.basicUser.next(\"Mike\");\n            //AppSettings.basicPwd.next(\"admin\");\n            //UserActions.getUser.sink.next( {\"user\":{\"firstName\":\"\",\"lastName\":\"\"}} );\n        }\n    }\n\n\n    componentWillMount() {\n        this.setState({\"isMounted\": true});\n    }\n\n    componentDidMount(){\n\n        UserActions.getUser.sink.takeWhile(() => this.state.isMounted).subscribe((user_)=>{\n            // redirect to dashboard\n            if( user_ )\n            {\n                this.setState({\"isAuthenticated\":true, \"isLoading\":false, \"user\": user_});\n            }\n        });\n\n        UserActions.getUser.source.next(null);\n    }\n\n\n    componentWillUnmount(){\n        this.setState({\"isMounted\":false});\n    }\n\n\n    render() {\n        const classes = this.props.classes;\n        const locale = \"en-EN\";\n\n\n        if (this.state.isLoading) {\n            return (\n                <div>\n                    <CircularProgress className={classes.progress} size={50}/>\n                </div>\n            );\n        }\n\n        return (\n            <IntlProvider locale={locale} key={locale} messages={this.props.i18nMessages[locale]}>\n                <Router>\n                    <Switch>\n                        <Route path=\"/\" component={() => <FilesPage user={this.state.user}/>}/>\n                    </Switch>\n                </Router>\n            </IntlProvider>\n        );\n\n    }\n\n}\n\nexport default withStyles(styleSheet)(App);","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {addLocaleData} from 'react-intl';\nimport registerServiceWorker from './registerServiceWorker';\n\n\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n//@see https://www.materialpalette.com\nimport deepPurple from '@material-ui/core/colors/deepPurple';\nimport indigo from '@material-ui/core/colors/indigo';\nimport red from '@material-ui/core/colors/red';\nimport './index.css';\n\nimport App from './App';\n\n/**\n * Setup i18n/Localization formats & messages\n */\naddLocaleData(require('react-intl/locale-data/en'));\nconst i18nMessages = {\n    \"en-EN\":require('./i18n/locales/en-EN.json')\n};\n\n\n\n/**\n * Setup Material-Ui Theme\n */\nconst theme = createMuiTheme({\n    palette: {\n        type: 'light', // Switching the dark mode on is a single property value change.\n        primary: deepPurple, // Purple and green play nicely together.\n        secondary: {\n            ...indigo\n        },\n        error: red\n    }\n});\n\n\n\nconst renderApp = function(){\n\n    ReactDOM.render(\n        <MuiThemeProvider theme={theme}>\n            <App i18nMessages={i18nMessages}/>\n        </MuiThemeProvider>\n        , document.getElementById('root'));\n\n}\n\nrenderApp();\nregisterServiceWorker();\n","\n\nexport default function register() {\n    const swUrl = `/files/service-worker-files.js`;\n    navigator.serviceWorker.register(swUrl).then(registration => {\n        console.debug(\"[app] sw registered\" +registration);\n    }).catch(error => {\n        console.error('[app] Error during service worker registration:', error);\n    });\n}\n\n\nexport function unregister() {\n    if ('serviceWorker' in navigator) {\n        navigator.serviceWorker.ready.then(registration => {\n            registration.unregister();\n        });\n    }\n}\n"],"sourceRoot":""}